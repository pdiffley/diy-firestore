<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>DIY Firestore: <!-- -->Basic Subscriptions</title><meta name="next-head-count" content="3"/><link rel="preload" href="/diy-firestore/_next/static/css/66a0bbf2b9cf8488.css" as="style"/><link rel="stylesheet" href="/diy-firestore/_next/static/css/66a0bbf2b9cf8488.css" data-n-g=""/><link rel="preload" href="/diy-firestore/_next/static/css/e9e2eda1f9dc698d.css" as="style"/><link rel="stylesheet" href="/diy-firestore/_next/static/css/e9e2eda1f9dc698d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/diy-firestore/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/diy-firestore/_next/static/chunks/webpack-df07c8c7f42d9fe8.js" defer=""></script><script src="/diy-firestore/_next/static/chunks/framework-85abacfba991a725.js" defer=""></script><script src="/diy-firestore/_next/static/chunks/main-319ff90b30ad4d29.js" defer=""></script><script src="/diy-firestore/_next/static/chunks/pages/_app-4394fb9185eabbc7.js" defer=""></script><script src="/diy-firestore/_next/static/chunks/9f529197-49e08325ab61b49d.js" defer=""></script><script src="/diy-firestore/_next/static/chunks/97-3f87bb423d54673c.js" defer=""></script><script src="/diy-firestore/_next/static/chunks/pages/posts/%5B%5B...slug%5D%5D-0bd81a0611356f07.js" defer=""></script><script src="/diy-firestore/_next/static/5zbzbXu7hqqmOa1SSHoRT/_buildManifest.js" defer=""></script><script src="/diy-firestore/_next/static/5zbzbXu7hqqmOa1SSHoRT/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="post_content__PPM5L"><nav class="post_nav__Q8sPv"><div class="post_homeLink__F688Z"><a href="/diy-firestore/">DIY Firestore</a></div></nav><main id="main-content"><article class="post_article__Q7gsU"><h1>Basic Subscriptions</h1>
<p>The ability to subscribe to changes in database state is a key feature of
Firestore that distinguishes it from other databases. For any query we can
make, we can create a listener that receives updates whenever the database
changes in a way that would affect that query&#x27;s results.</p>
<p>Supporting this feature introduces significant system design complications
though. A naive approach would have each listener poll our database for
updates. This quickly becomes unscaleable because the polling would repeatedly
send the same queries to the database regardless of whether the query results
have changed. Even at a small scale, this approach would hammer our database
with expensive requests, almost none of which would return new information to the
client.</p>
<p>A better approach is to check for updates when we write to the database and send
an update to any subscribed queries that are affected by a particular write.
This raises another issue though. Assuming we have a large number of users each
with their own set of subscriptions, we can&#x27;t just check every subscribed query
to see if it is affected by an update every time we write to the database.</p>
<p>When we write a document to the database, we need a way to efficiently select
the set of subscriptions that are affected by the write. In short, we need to
query the set of database subscriptions.</p>
<h2>Select subscriptions affected by a write</h2>
<p>To that end, we will create a table, <code>basic_subscriptions</code>, where we will
track subscriptions to documents, collections, and collection groups</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>CREATE TABLE basic_subscriptions (</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  collection_parent_path      TEXT,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  collection_id               TEXT,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  document_id                 TEXT,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  subscription_id             TEXT</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  PRIMARY KEY (subscription_id)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>);</span></div></div><br/></code></div></div>
<p>Each row represents a subscription and the relevant identifiers for it. A
subscription to a document will specify all three document identifiers,
collection_parent_path, collection_id, and document_id, a subscription to a
collection will leave document_id null, and a subscription to a collection group
will leave both collection_parent_path and document_id null.</p>
<p>So that we can query these values efficiently, we&#x27;ll create the index</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>CREATE INDEX basic_subscriptions_idx</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>ON basic_subscriptions(collection_parent_path, collection_id, document_id);</span></div></div><br/></code></div></div>
<p>Now we can write a function that will take a document id and return any
subscriptions affected by that document.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>pub fn get_matching_basic_subscription_ids(</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  transaction: &amp;mut Transaction,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  collection_parent_path: &amp;str,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  collection_id: &amp;str,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  document_id: &amp;str) -&gt; Vec&lt;String&gt;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  let document_subscriptions: Vec&lt;String&gt; = transaction.query(</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    &quot;SELECT subscription_id</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    from basic_subscriptions</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    where collection_parent_path=$1 and collection_id=$2 and document_id=$3&quot;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    &amp;[&amp;collection_parent_path, &amp;collection_id, &amp;document_id],</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  ).unwrap().iter()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    .map(|x| x.get(0)).collect();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  let collection_subscriptions: Vec&lt;String&gt; = transaction.query(</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    &quot;SELECT subscription_id</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    from basic_subscriptions</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    where collection_parent_path=$1 and collection_id=$2 and </span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    document_id IS NULL&quot;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    &amp;[&amp;collection_parent_path, &amp;collection_id],</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  ).unwrap().iter()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    .map(|x| x.get(0)).collect();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  let collection_group_subscriptions: Vec&lt;String&gt; = transaction.query(</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    &quot;SELECT subscription_id</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    from basic_subscriptions</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    where collection_parent_path IS NULL and collection_id=$1 and </span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    document_id IS NULL&quot;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    &amp;[&amp;collection_id],</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  ).unwrap().iter()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    .map(|x| x.get(0)).collect();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  let all_matching_subscriptions: Vec&lt;String&gt; =</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    document_subscriptions.into_iter()</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      .chain(collection_subscriptions.into_iter())</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      .chain(collection_group_subscriptions.into_iter())</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      .collect();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  all_matching_subscriptions</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br/></code></div></div>
<p>This function runs three queries on the basic_subscriptions table,
selecting document, collection, and collection group subscriptions
that match the specified document&#x27;s identifiers.</p>
<p>To identify the subscriptions affected by a write, we will then add
that function to our create and delete document methods.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>fn create_document(</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  transaction: &amp;mut Transaction,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  collection_parent_path: &amp;str,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  collection_id: &amp;str,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  document_id: &amp;str,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  update_id: &amp;str,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  document: &amp;Document,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>) {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  let mut encoded_document: Vec&lt;u8&gt; = vec![];</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  document.encode(&amp;mut encoded_document).unwrap();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  add_document_to_documents_table(transaction, collection_parent_path, collection_id, document_id, update_id, &amp;encoded_document);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  let mut matching_subscriptions = vec![];</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  matching_subscriptions.extend(</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    get_matching_basic_subscription_ids(transaction, collection_parent_path, </span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      collection_id, document_id).into_iter());</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  // Todo: send update to matching subscriptions</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br/></code></div></div>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>pub fn delete_document(</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  transaction: &amp;mut Transaction,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  collection_parent_path: &amp;str,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  collection_id: &amp;str,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  document_id: &amp;str,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>) {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  if let Some(document) = get_document(transaction, collection_parent_path, collection_id, document_id) {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    delete_document_from_documents_table(transaction, collection_parent_path, collection_id, document_id);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    let mut matching_subscriptions = vec![];</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    matching_subscriptions.extend(</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>      get_matching_basic_subscription_ids(transaction, collection_parent_path, </span></div></div><div><div style="display:inline-block;margin-left:16px"><span>        collection_id, document_id).into_iter());</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    // Todo: send update to matching subscriptions</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  }</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br/></code></div></div>
<p>Later in the series, we will show how we will actually deliver updates to these
subscriptions. For now, we know that whenever we write to the
database we can efficiently get the list of subscriptions that need to receive an update.</p>
<h2>Subscribing to a query</h2>
<p>To support subscribing to a query in the first place, we will create another table <code>client_subscriptions</code>,</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>CREATE TABLE client_subscriptions (</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  subscription_id     TEXT,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  client_id           TEXT</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>);</span></div></div><br/></code></div></div>
<p>When a client subscribes to a query we will generate a new subscription id and
put it into this table along with the client&#x27;s id. Then we insert a new row in <code>basic_subscriptions</code>
for the query, as shown in this <code>subscribe_to_document</code> function</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>pub fn subscribe_to_document(</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  transaction: &amp;mut Transaction,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  client_id: &amp;str,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  collection_parent_path: &amp;str,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  collection_id: &amp;str,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  document_id: &amp;str,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>) -&gt; String</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  let subscription_id: String = Uuid::new_v4().as_simple().to_string();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  transaction.execute(&quot;insert into client_subscriptions values ($1, $2)&quot;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                      &amp;[&amp;subscription_id, &amp;client_id]).unwrap();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  transaction.execute(&quot;insert into basic_subscriptions values ($1, $2, $3, $4)&quot;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>                      &amp;[&amp;collection_parent_path, &amp;collection_id, &amp;document_id, &amp;subscription_id]).unwrap();</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  // Todo: send client first batch of subscribed query data</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  subscription_id</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br/></code></div></div>
<p>In practice, we would have this subscription function also return the initial query results as indicated in the todo.</p>
<h2>Next up</h2>
<p>We can now read and write documents to our database and subscribe to document
changes, but we can&#x27;t query collections based on document data. Let&#x27;s fix that.</p></article></main><footer class="post_footer__wtu2H"><div><a href="/diy-firestore/posts/transactions/">← <!-- -->Transactions</a> | <a href="/diy-firestore/posts/queries-first-attempt/">Simple Queries: A First Attempt<!-- --> →</a></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nconst chCodeConfig = {\n  \"staticMediaQuery\": \"not screen, (max-width: 768px)\",\n  \"autoImport\": false,\n  \"theme\": {\n    \"$schema\": \"vscode://schemas/color-theme\",\n    \"name\": \"dracula-soft\",\n    \"author\": \"Zeno Rocha\",\n    \"maintainers\": [\"Derek P Sifford \u003cdereksifford@gmail.com\u003e\"],\n    \"semanticClass\": \"theme.dracula\",\n    \"semanticHighlighting\": true,\n    \"dracula\": {\n      \"base\": [\"#282A36\", \"#F8F8F2\", \"#44475A\", \"#6272A4\", \"#8BE9FD\", \"#50FA7B\", \"#FFB86C\", \"#FF79C6\", \"#BD93F9\", \"#FF5555\", \"#F1FA8C\"],\n      \"ansi\": [\"#21222C\", \"#FF5555\", \"#50FA7B\", \"#F1FA8C\", \"#BD93F9\", \"#FF79C6\", \"#8BE9FD\", \"#F8F8F2\", \"#6272A4\", \"#FF6E6E\", \"#69FF94\", \"#FFFFA5\", \"#D6ACFF\", \"#FF92DF\", \"#A4FFFF\", \"#FFFFFF\"],\n      \"brightOther\": [\"#E9F284\", \"#8BE9FE\"],\n      \"other\": [\"#44475A75\", \"#FFFFFF1A\", \"#FFFFFF\", \"#44475A70\", \"#424450\", \"#343746\", \"#21222C\", \"#191A21\"]\n    },\n    \"colors\": {\n      \"terminal.background\": \"#282A36\",\n      \"terminal.foreground\": \"#f6f6f4\",\n      \"terminal.ansiBrightBlack\": \"#7b7f8b\",\n      \"terminal.ansiBrightRed\": \"#f07c7c\",\n      \"terminal.ansiBrightGreen\": \"#78f09a\",\n      \"terminal.ansiBrightYellow\": \"#f6f6ae\",\n      \"terminal.ansiBrightBlue\": \"#d6b4f7\",\n      \"terminal.ansiBrightMagenta\": \"#f49dda\",\n      \"terminal.ansiBrightCyan\": \"#adf6f6\",\n      \"terminal.ansiBrightWhite\": \"#ffffff\",\n      \"terminal.ansiBlack\": \"#262626\",\n      \"terminal.ansiRed\": \"#ee6666\",\n      \"terminal.ansiGreen\": \"#62e884\",\n      \"terminal.ansiYellow\": \"#e7ee98\",\n      \"terminal.ansiBlue\": \"#bf9eee\",\n      \"terminal.ansiMagenta\": \"#f286c4\",\n      \"terminal.ansiCyan\": \"#97e1f1\",\n      \"terminal.ansiWhite\": \"#f6f6f4\",\n      \"focusBorder\": \"#7b7f8b\",\n      \"foreground\": \"#f6f6f4\",\n      \"selection.background\": \"#bf9eee\",\n      \"errorForeground\": \"#ee6666\",\n      \"button.background\": \"#44475A\",\n      \"button.foreground\": \"#f6f6f4\",\n      \"button.secondaryBackground\": \"#282A36\",\n      \"button.secondaryForeground\": \"#f6f6f4\",\n      \"button.secondaryHoverBackground\": \"#343746\",\n      \"dropdown.background\": \"#343746\",\n      \"dropdown.border\": \"#191A21\",\n      \"dropdown.foreground\": \"#f6f6f4\",\n      \"input.background\": \"#282A36\",\n      \"input.foreground\": \"#f6f6f4\",\n      \"input.border\": \"#191A21\",\n      \"input.placeholderForeground\": \"#7b7f8b\",\n      \"inputOption.activeBorder\": \"#bf9eee\",\n      \"inputValidation.infoBorder\": \"#f286c4\",\n      \"inputValidation.warningBorder\": \"#FFB86C\",\n      \"inputValidation.errorBorder\": \"#ee6666\",\n      \"badge.foreground\": \"#f6f6f4\",\n      \"badge.background\": \"#44475A\",\n      \"progressBar.background\": \"#f286c4\",\n      \"list.activeSelectionBackground\": \"#44475A\",\n      \"list.activeSelectionForeground\": \"#f6f6f4\",\n      \"list.dropBackground\": \"#44475A\",\n      \"list.focusBackground\": \"#44475A75\",\n      \"list.highlightForeground\": \"#97e1f1\",\n      \"list.hoverBackground\": \"#44475A75\",\n      \"list.inactiveSelectionBackground\": \"#44475A75\",\n      \"list.warningForeground\": \"#FFB86C\",\n      \"list.errorForeground\": \"#ee6666\",\n      \"activityBar.background\": \"#343746\",\n      \"activityBar.inactiveForeground\": \"#7b7f8b\",\n      \"activityBar.foreground\": \"#f6f6f4\",\n      \"activityBar.activeBorder\": \"#FF79C680\",\n      \"activityBar.activeBackground\": \"#BD93F910\",\n      \"activityBarBadge.background\": \"#f286c4\",\n      \"activityBarBadge.foreground\": \"#f6f6f4\",\n      \"sideBar.background\": \"#262626\",\n      \"sideBarTitle.foreground\": \"#f6f6f4\",\n      \"sideBarSectionHeader.background\": \"#282A36\",\n      \"sideBarSectionHeader.border\": \"#191A21\",\n      \"editorGroup.border\": \"#bf9eee\",\n      \"editorGroup.dropBackground\": \"#44475A70\",\n      \"editorGroupHeader.tabsBackground\": \"#191A21\",\n      \"tab.activeBackground\": \"#282A36\",\n      \"tab.activeForeground\": \"#f6f6f4\",\n      \"tab.border\": \"#191A21\",\n      \"tab.activeBorderTop\": \"#FF79C680\",\n      \"tab.inactiveBackground\": \"#262626\",\n      \"tab.inactiveForeground\": \"#7b7f8b\",\n      \"editor.foreground\": \"#f6f6f4\",\n      \"editor.background\": \"#282A36\",\n      \"editorLineNumber.foreground\": \"#7b7f8b\",\n      \"editor.selectionBackground\": \"#44475A\",\n      \"editor.selectionHighlightBackground\": \"#424450\",\n      \"editor.foldBackground\": \"#21222C80\",\n      \"editor.wordHighlightBackground\": \"#8BE9FD50\",\n      \"editor.wordHighlightStrongBackground\": \"#50FA7B50\",\n      \"editor.findMatchBackground\": \"#FFB86C80\",\n      \"editor.findMatchHighlightBackground\": \"#FFFFFF40\",\n      \"editor.findRangeHighlightBackground\": \"#44475A75\",\n      \"editor.hoverHighlightBackground\": \"#8BE9FD50\",\n      \"editor.lineHighlightBorder\": \"#44475A\",\n      \"editorLink.activeForeground\": \"#97e1f1\",\n      \"editor.rangeHighlightBackground\": \"#BD93F915\",\n      \"editor.snippetTabstopHighlightBackground\": \"#282A36\",\n      \"editor.snippetTabstopHighlightBorder\": \"#7b7f8b\",\n      \"editor.snippetFinalTabstopHighlightBackground\": \"#282A36\",\n      \"editor.snippetFinalTabstopHighlightBorder\": \"#62e884\",\n      \"editorWhitespace.foreground\": \"#FFFFFF1A\",\n      \"editorIndentGuide.background\": \"#FFFFFF1A\",\n      \"editorIndentGuide.activeBackground\": \"#FFFFFF45\",\n      \"editorRuler.foreground\": \"#FFFFFF1A\",\n      \"editorCodeLens.foreground\": \"#7b7f8b\",\n      \"editorBracketHighlight.foreground1\": \"#f6f6f4\",\n      \"editorBracketHighlight.foreground2\": \"#f286c4\",\n      \"editorBracketHighlight.foreground3\": \"#97e1f1\",\n      \"editorBracketHighlight.foreground4\": \"#62e884\",\n      \"editorBracketHighlight.foreground5\": \"#bf9eee\",\n      \"editorBracketHighlight.foreground6\": \"#FFB86C\",\n      \"editorBracketHighlight.unexpectedBracket.foreground\": \"#ee6666\",\n      \"editorOverviewRuler.border\": \"#191A21\",\n      \"editorOverviewRuler.selectionHighlightForeground\": \"#FFB86C\",\n      \"editorOverviewRuler.wordHighlightForeground\": \"#97e1f1\",\n      \"editorOverviewRuler.wordHighlightStrongForeground\": \"#62e884\",\n      \"editorOverviewRuler.modifiedForeground\": \"#8BE9FD80\",\n      \"editorOverviewRuler.addedForeground\": \"#50FA7B80\",\n      \"editorOverviewRuler.deletedForeground\": \"#FF555580\",\n      \"editorOverviewRuler.errorForeground\": \"#FF555580\",\n      \"editorOverviewRuler.warningForeground\": \"#FFB86C80\",\n      \"editorOverviewRuler.infoForeground\": \"#8BE9FD80\",\n      \"editorError.foreground\": \"#ee6666\",\n      \"editorWarning.foreground\": \"#97e1f1\",\n      \"editorGutter.modifiedBackground\": \"#8BE9FD80\",\n      \"editorGutter.addedBackground\": \"#50FA7B80\",\n      \"editorGutter.deletedBackground\": \"#FF555580\",\n      \"gitDecoration.modifiedResourceForeground\": \"#97e1f1\",\n      \"gitDecoration.deletedResourceForeground\": \"#ee6666\",\n      \"gitDecoration.untrackedResourceForeground\": \"#62e884\",\n      \"gitDecoration.ignoredResourceForeground\": \"#7b7f8b\",\n      \"gitDecoration.conflictingResourceForeground\": \"#FFB86C\",\n      \"diffEditor.insertedTextBackground\": \"#50FA7B20\",\n      \"diffEditor.removedTextBackground\": \"#FF555550\",\n      \"editorWidget.background\": \"#262626\",\n      \"editorSuggestWidget.background\": \"#262626\",\n      \"editorSuggestWidget.foreground\": \"#f6f6f4\",\n      \"editorSuggestWidget.selectedBackground\": \"#44475A\",\n      \"editorHoverWidget.background\": \"#282A36\",\n      \"editorHoverWidget.border\": \"#7b7f8b\",\n      \"editorMarkerNavigation.background\": \"#262626\",\n      \"peekView.border\": \"#44475A\",\n      \"peekViewEditor.background\": \"#282A36\",\n      \"peekViewEditor.matchHighlightBackground\": \"#F1FA8C80\",\n      \"peekViewResult.background\": \"#262626\",\n      \"peekViewResult.fileForeground\": \"#f6f6f4\",\n      \"peekViewResult.lineForeground\": \"#f6f6f4\",\n      \"peekViewResult.matchHighlightBackground\": \"#F1FA8C80\",\n      \"peekViewResult.selectionBackground\": \"#44475A\",\n      \"peekViewResult.selectionForeground\": \"#f6f6f4\",\n      \"peekViewTitle.background\": \"#191A21\",\n      \"peekViewTitleDescription.foreground\": \"#7b7f8b\",\n      \"peekViewTitleLabel.foreground\": \"#f6f6f4\",\n      \"merge.currentHeaderBackground\": \"#50FA7B90\",\n      \"merge.incomingHeaderBackground\": \"#BD93F990\",\n      \"editorOverviewRuler.currentContentForeground\": \"#62e884\",\n      \"editorOverviewRuler.incomingContentForeground\": \"#bf9eee\",\n      \"panel.background\": \"#282A36\",\n      \"panel.border\": \"#bf9eee\",\n      \"panelTitle.activeBorder\": \"#f286c4\",\n      \"panelTitle.activeForeground\": \"#f6f6f4\",\n      \"panelTitle.inactiveForeground\": \"#7b7f8b\",\n      \"statusBar.background\": \"#191A21\",\n      \"statusBar.foreground\": \"#f6f6f4\",\n      \"statusBar.debuggingBackground\": \"#ee6666\",\n      \"statusBar.debuggingForeground\": \"#191A21\",\n      \"statusBar.noFolderBackground\": \"#191A21\",\n      \"statusBar.noFolderForeground\": \"#f6f6f4\",\n      \"statusBarItem.prominentBackground\": \"#ee6666\",\n      \"statusBarItem.prominentHoverBackground\": \"#FFB86C\",\n      \"statusBarItem.remoteForeground\": \"#282A36\",\n      \"statusBarItem.remoteBackground\": \"#bf9eee\",\n      \"titleBar.activeBackground\": \"#262626\",\n      \"titleBar.activeForeground\": \"#f6f6f4\",\n      \"titleBar.inactiveBackground\": \"#191A21\",\n      \"titleBar.inactiveForeground\": \"#7b7f8b\",\n      \"extensionButton.prominentForeground\": \"#f6f6f4\",\n      \"extensionButton.prominentBackground\": \"#50FA7B90\",\n      \"extensionButton.prominentHoverBackground\": \"#50FA7B60\",\n      \"pickerGroup.border\": \"#bf9eee\",\n      \"pickerGroup.foreground\": \"#97e1f1\",\n      \"debugToolBar.background\": \"#262626\",\n      \"walkThrough.embeddedEditorBackground\": \"#262626\",\n      \"settings.headerForeground\": \"#f6f6f4\",\n      \"settings.modifiedItemIndicator\": \"#FFB86C\",\n      \"settings.dropdownBackground\": \"#262626\",\n      \"settings.dropdownForeground\": \"#f6f6f4\",\n      \"settings.dropdownBorder\": \"#191A21\",\n      \"settings.checkboxBackground\": \"#262626\",\n      \"settings.checkboxForeground\": \"#f6f6f4\",\n      \"settings.checkboxBorder\": \"#191A21\",\n      \"settings.textInputBackground\": \"#262626\",\n      \"settings.textInputForeground\": \"#f6f6f4\",\n      \"settings.textInputBorder\": \"#191A21\",\n      \"settings.numberInputBackground\": \"#262626\",\n      \"settings.numberInputForeground\": \"#f6f6f4\",\n      \"settings.numberInputBorder\": \"#191A21\",\n      \"breadcrumb.foreground\": \"#7b7f8b\",\n      \"breadcrumb.background\": \"#282A36\",\n      \"breadcrumb.focusForeground\": \"#f6f6f4\",\n      \"breadcrumb.activeSelectionForeground\": \"#f6f6f4\",\n      \"breadcrumbPicker.background\": \"#191A21\",\n      \"listFilterWidget.background\": \"#343746\",\n      \"listFilterWidget.outline\": \"#424450\",\n      \"listFilterWidget.noMatchesOutline\": \"#ee6666\"\n    },\n    \"tokenColors\": [{\n      \"settings\": {\n        \"foreground\": \"#f6f6f4\",\n        \"background\": \"#282A36\"\n      }\n    }, {\n      \"scope\": [\"emphasis\"],\n      \"settings\": {\n        \"fontStyle\": \"italic\"\n      }\n    }, {\n      \"scope\": [\"strong\"],\n      \"settings\": {\n        \"fontStyle\": \"bold\"\n      }\n    }, {\n      \"scope\": [\"header\"],\n      \"settings\": {\n        \"foreground\": \"#bf9eee\"\n      }\n    }, {\n      \"scope\": [\"meta.diff\", \"meta.diff.header\"],\n      \"settings\": {\n        \"foreground\": \"#7b7f8b\"\n      }\n    }, {\n      \"scope\": [\"markup.inserted\"],\n      \"settings\": {\n        \"foreground\": \"#62e884\"\n      }\n    }, {\n      \"scope\": [\"markup.deleted\"],\n      \"settings\": {\n        \"foreground\": \"#ee6666\"\n      }\n    }, {\n      \"scope\": [\"markup.changed\"],\n      \"settings\": {\n        \"foreground\": \"#FFB86C\"\n      }\n    }, {\n      \"scope\": [\"invalid\"],\n      \"settings\": {\n        \"foreground\": \"#ee6666\",\n        \"fontStyle\": \"underline italic\"\n      }\n    }, {\n      \"scope\": [\"invalid.deprecated\"],\n      \"settings\": {\n        \"foreground\": \"#f6f6f4\",\n        \"fontStyle\": \"underline italic\"\n      }\n    }, {\n      \"scope\": [\"entity.name.filename\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\"\n      }\n    }, {\n      \"scope\": [\"markup.error\"],\n      \"settings\": {\n        \"foreground\": \"#ee6666\"\n      }\n    }, {\n      \"name\": \"Underlined markup\",\n      \"scope\": [\"markup.underline\"],\n      \"settings\": {\n        \"fontStyle\": \"underline\"\n      }\n    }, {\n      \"name\": \"Bold markup\",\n      \"scope\": [\"markup.bold\"],\n      \"settings\": {\n        \"fontStyle\": \"bold\",\n        \"foreground\": \"#FFB86C\"\n      }\n    }, {\n      \"name\": \"Markup headings\",\n      \"scope\": [\"markup.heading\"],\n      \"settings\": {\n        \"fontStyle\": \"bold\",\n        \"foreground\": \"#bf9eee\"\n      }\n    }, {\n      \"name\": \"Markup italic\",\n      \"scope\": [\"markup.italic\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\",\n        \"fontStyle\": \"italic\"\n      }\n    }, {\n      \"name\": \"Bullets, lists (prose)\",\n      \"scope\": [\"beginning.punctuation.definition.list.markdown\", \"beginning.punctuation.definition.quote.markdown\", \"punctuation.definition.link.restructuredtext\"],\n      \"settings\": {\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"Inline code (prose)\",\n      \"scope\": [\"markup.inline.raw\", \"markup.raw.restructuredtext\"],\n      \"settings\": {\n        \"foreground\": \"#62e884\"\n      }\n    }, {\n      \"name\": \"Links (prose)\",\n      \"scope\": [\"markup.underline.link\", \"markup.underline.link.image\"],\n      \"settings\": {\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"Link text, image alt text (prose)\",\n      \"scope\": [\"meta.link.reference.def.restructuredtext\", \"punctuation.definition.directive.restructuredtext\", \"string.other.link.description\", \"string.other.link.title\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"Blockquotes (prose)\",\n      \"scope\": [\"entity.name.directive.restructuredtext\", \"markup.quote\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\",\n        \"fontStyle\": \"italic\"\n      }\n    }, {\n      \"name\": \"Horizontal rule (prose)\",\n      \"scope\": [\"meta.separator.markdown\"],\n      \"settings\": {\n        \"foreground\": \"#7b7f8b\"\n      }\n    }, {\n      \"name\": \"Code blocks\",\n      \"scope\": [\"fenced_code.block.language\", \"markup.raw.inner.restructuredtext\", \"markup.fenced_code.block.markdown punctuation.definition.markdown\"],\n      \"settings\": {\n        \"foreground\": \"#62e884\"\n      }\n    }, {\n      \"name\": \"Prose constants\",\n      \"scope\": [\"punctuation.definition.constant.restructuredtext\"],\n      \"settings\": {\n        \"foreground\": \"#bf9eee\"\n      }\n    }, {\n      \"name\": \"Braces in markdown headings\",\n      \"scope\": [\"markup.heading.markdown punctuation.definition.string.begin\", \"markup.heading.markdown punctuation.definition.string.end\"],\n      \"settings\": {\n        \"foreground\": \"#bf9eee\"\n      }\n    }, {\n      \"name\": \"Braces in markdown paragraphs\",\n      \"scope\": [\"meta.paragraph.markdown punctuation.definition.string.begin\", \"meta.paragraph.markdown punctuation.definition.string.end\"],\n      \"settings\": {\n        \"foreground\": \"#f6f6f4\"\n      }\n    }, {\n      \"name\": \"Braces in markdown blockquotes\",\n      \"scope\": [\"markup.quote.markdown meta.paragraph.markdown punctuation.definition.string.begin\", \"markup.quote.markdown meta.paragraph.markdown punctuation.definition.string.end\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\"\n      }\n    }, {\n      \"name\": \"User-defined class names\",\n      \"scope\": [\"entity.name.type.class\", \"entity.name.class\"],\n      \"settings\": {\n        \"foreground\": \"#97e1f1\",\n        \"fontStyle\": \"normal\"\n      }\n    }, {\n      \"name\": \"this, super, self, etc.\",\n      \"scope\": [\"keyword.expressions-and-types.swift\", \"keyword.other.this\", \"variable.language\", \"variable.language punctuation.definition.variable.php\", \"variable.other.readwrite.instance.ruby\", \"variable.parameter.function.language.special\"],\n      \"settings\": {\n        \"foreground\": \"#bf9eee\",\n        \"fontStyle\": \"italic\"\n      }\n    }, {\n      \"name\": \"Inherited classes\",\n      \"scope\": [\"entity.other.inherited-class\"],\n      \"settings\": {\n        \"fontStyle\": \"italic\",\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"Comments\",\n      \"scope\": [\"comment\", \"punctuation.definition.comment\", \"unused.comment\", \"wildcard.comment\"],\n      \"settings\": {\n        \"foreground\": \"#7b7f8b\"\n      }\n    }, {\n      \"name\": \"JSDoc-style keywords\",\n      \"scope\": [\"comment keyword.codetag.notation\", \"comment.block.documentation keyword\", \"comment.block.documentation storage.type.class\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"JSDoc-style types\",\n      \"scope\": [\"comment.block.documentation entity.name.type\"],\n      \"settings\": {\n        \"foreground\": \"#97e1f1\",\n        \"fontStyle\": \"italic\"\n      }\n    }, {\n      \"name\": \"JSDoc-style type brackets\",\n      \"scope\": [\"comment.block.documentation entity.name.type punctuation.definition.bracket\"],\n      \"settings\": {\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"JSDoc-style comment parameters\",\n      \"scope\": [\"comment.block.documentation variable\"],\n      \"settings\": {\n        \"foreground\": \"#FFB86C\",\n        \"fontStyle\": \"italic\"\n      }\n    }, {\n      \"name\": \"Constants\",\n      \"scope\": [\"constant\", \"variable.other.constant\"],\n      \"settings\": {\n        \"foreground\": \"#bf9eee\"\n      }\n    }, {\n      \"name\": \"Constant escape sequences\",\n      \"scope\": [\"constant.character.escape\", \"constant.character.string.escape\", \"constant.regexp\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"HTML tags\",\n      \"scope\": [\"entity.name.tag\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"CSS attribute parent selectors ('\u0026')\",\n      \"scope\": [\"entity.other.attribute-name.parent-selector\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"HTML/CSS attribute names\",\n      \"scope\": [\"entity.other.attribute-name\"],\n      \"settings\": {\n        \"foreground\": \"#62e884\",\n        \"fontStyle\": \"italic\"\n      }\n    }, {\n      \"name\": \"Function names\",\n      \"scope\": [\"entity.name.function\", \"meta.function-call.object\", \"meta.function-call.php\", \"meta.function-call.static\", \"meta.method-call.java meta.method\", \"meta.method.groovy\", \"support.function.any-method.lua\", \"keyword.operator.function.infix\"],\n      \"settings\": {\n        \"foreground\": \"#62e884\"\n      }\n    }, {\n      \"name\": \"Function parameters\",\n      \"scope\": [\"entity.name.variable.parameter\", \"meta.at-rule.function variable\", \"meta.at-rule.mixin variable\", \"meta.function.arguments variable.other.php\", \"meta.selectionset.graphql meta.arguments.graphql variable.arguments.graphql\", \"variable.parameter\"],\n      \"settings\": {\n        \"fontStyle\": \"italic\",\n        \"foreground\": \"#FFB86C\"\n      }\n    }, {\n      \"name\": \"Decorators\",\n      \"scope\": [\"meta.decorator variable.other.readwrite\", \"meta.decorator variable.other.property\"],\n      \"settings\": {\n        \"foreground\": \"#62e884\",\n        \"fontStyle\": \"italic\"\n      }\n    }, {\n      \"name\": \"Decorator Objects\",\n      \"scope\": [\"meta.decorator variable.other.object\"],\n      \"settings\": {\n        \"foreground\": \"#62e884\"\n      }\n    }, {\n      \"name\": \"Keywords\",\n      \"scope\": [\"keyword\", \"punctuation.definition.keyword\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"Keyword \\\"new\\\"\",\n      \"scope\": [\"keyword.control.new\", \"keyword.operator.new\"],\n      \"settings\": {\n        \"fontStyle\": \"bold\"\n      }\n    }, {\n      \"name\": \"Generic selectors (CSS/SCSS/Less/Stylus)\",\n      \"scope\": [\"meta.selector\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"Language Built-ins\",\n      \"scope\": [\"support\"],\n      \"settings\": {\n        \"fontStyle\": \"italic\",\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"Built-in magic functions and constants\",\n      \"scope\": [\"support.function.magic\", \"support.variable\", \"variable.other.predefined\"],\n      \"settings\": {\n        \"fontStyle\": \"regular\",\n        \"foreground\": \"#bf9eee\"\n      }\n    }, {\n      \"name\": \"Built-in functions / properties\",\n      \"scope\": [\"support.function\", \"support.type.property-name\"],\n      \"settings\": {\n        \"fontStyle\": \"regular\"\n      }\n    }, {\n      \"name\": \"Separators (key/value, namespace, inheritance, pointer, hash, slice, etc)\",\n      \"scope\": [\"constant.other.symbol.hashkey punctuation.definition.constant.ruby\", \"entity.other.attribute-name.placeholder punctuation\", \"entity.other.attribute-name.pseudo-class punctuation\", \"entity.other.attribute-name.pseudo-element punctuation\", \"meta.group.double.toml\", \"meta.group.toml\", \"meta.object-binding-pattern-variable punctuation.destructuring\", \"punctuation.colon.graphql\", \"punctuation.definition.block.scalar.folded.yaml\", \"punctuation.definition.block.scalar.literal.yaml\", \"punctuation.definition.block.sequence.item.yaml\", \"punctuation.definition.entity.other.inherited-class\", \"punctuation.function.swift\", \"punctuation.separator.dictionary.key-value\", \"punctuation.separator.hash\", \"punctuation.separator.inheritance\", \"punctuation.separator.key-value\", \"punctuation.separator.key-value.mapping.yaml\", \"punctuation.separator.namespace\", \"punctuation.separator.pointer-access\", \"punctuation.separator.slice\", \"string.unquoted.heredoc punctuation.definition.string\", \"support.other.chomping-indicator.yaml\", \"punctuation.separator.annotation\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"Brackets, braces, parens, etc.\",\n      \"scope\": [\"keyword.operator.other.powershell\", \"keyword.other.statement-separator.powershell\", \"meta.brace.round\", \"meta.function-call punctuation\", \"punctuation.definition.arguments.begin\", \"punctuation.definition.arguments.end\", \"punctuation.definition.entity.begin\", \"punctuation.definition.entity.end\", \"punctuation.definition.tag.cs\", \"punctuation.definition.type.begin\", \"punctuation.definition.type.end\", \"punctuation.section.scope.begin\", \"punctuation.section.scope.end\", \"punctuation.terminator.expression.php\", \"storage.type.generic.java\", \"string.template meta.brace\", \"string.template punctuation.accessor\"],\n      \"settings\": {\n        \"foreground\": \"#f6f6f4\"\n      }\n    }, {\n      \"name\": \"Variable interpolation operators\",\n      \"scope\": [\"meta.string-contents.quoted.double punctuation.definition.variable\", \"punctuation.definition.interpolation.begin\", \"punctuation.definition.interpolation.end\", \"punctuation.definition.template-expression.begin\", \"punctuation.definition.template-expression.end\", \"punctuation.section.embedded.begin\", \"punctuation.section.embedded.coffee\", \"punctuation.section.embedded.end\", \"punctuation.section.embedded.end source.php\", \"punctuation.section.embedded.end source.ruby\", \"punctuation.definition.variable.makefile\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"Keys (serializable languages)\",\n      \"scope\": [\"entity.name.function.target.makefile\", \"entity.name.section.toml\", \"entity.name.tag.yaml\", \"variable.other.key.toml\"],\n      \"settings\": {\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"Dates / timestamps (serializable languages)\",\n      \"scope\": [\"constant.other.date\", \"constant.other.timestamp\"],\n      \"settings\": {\n        \"foreground\": \"#FFB86C\"\n      }\n    }, {\n      \"name\": \"YAML aliases\",\n      \"scope\": [\"variable.other.alias.yaml\"],\n      \"settings\": {\n        \"fontStyle\": \"italic underline\",\n        \"foreground\": \"#62e884\"\n      }\n    }, {\n      \"name\": \"Storage\",\n      \"scope\": [\"storage\", \"meta.implementation storage.type.objc\", \"meta.interface-or-protocol storage.type.objc\", \"source.groovy storage.type.def\"],\n      \"settings\": {\n        \"fontStyle\": \"regular\",\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"Types\",\n      \"scope\": [\"entity.name.type\", \"keyword.primitive-datatypes.swift\", \"keyword.type.cs\", \"meta.protocol-list.objc\", \"meta.return-type.objc\", \"source.go storage.type\", \"source.groovy storage.type\", \"source.java storage.type\", \"source.powershell entity.other.attribute-name\", \"storage.class.std.rust\", \"storage.type.attribute.swift\", \"storage.type.c\", \"storage.type.core.rust\", \"storage.type.cs\", \"storage.type.groovy\", \"storage.type.objc\", \"storage.type.php\", \"storage.type.haskell\", \"storage.type.ocaml\"],\n      \"settings\": {\n        \"fontStyle\": \"italic\",\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"Generics, templates, and mapped type declarations\",\n      \"scope\": [\"entity.name.type.type-parameter\", \"meta.indexer.mappedtype.declaration entity.name.type\", \"meta.type.parameters entity.name.type\"],\n      \"settings\": {\n        \"foreground\": \"#FFB86C\"\n      }\n    }, {\n      \"name\": \"Modifiers\",\n      \"scope\": [\"storage.modifier\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"RegExp string\",\n      \"scope\": [\"string.regexp\", \"constant.other.character-class.set.regexp\", \"constant.character.escape.backslash.regexp\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\"\n      }\n    }, {\n      \"name\": \"Non-capture operators\",\n      \"scope\": [\"punctuation.definition.group.capture.regexp\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"RegExp start and end characters\",\n      \"scope\": [\"string.regexp punctuation.definition.string.begin\", \"string.regexp punctuation.definition.string.end\"],\n      \"settings\": {\n        \"foreground\": \"#ee6666\"\n      }\n    }, {\n      \"name\": \"Character group\",\n      \"scope\": [\"punctuation.definition.character-class.regexp\"],\n      \"settings\": {\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"Capture groups\",\n      \"scope\": [\"punctuation.definition.group.regexp\"],\n      \"settings\": {\n        \"foreground\": \"#FFB86C\"\n      }\n    }, {\n      \"name\": \"Assertion operators\",\n      \"scope\": [\"punctuation.definition.group.assertion.regexp\", \"keyword.operator.negation.regexp\"],\n      \"settings\": {\n        \"foreground\": \"#ee6666\"\n      }\n    }, {\n      \"name\": \"Positive lookaheads\",\n      \"scope\": [\"meta.assertion.look-ahead.regexp\"],\n      \"settings\": {\n        \"foreground\": \"#62e884\"\n      }\n    }, {\n      \"name\": \"Strings\",\n      \"scope\": [\"string\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\"\n      }\n    }, {\n      \"name\": \"String quotes (temporary vscode fix)\",\n      \"scope\": [\"punctuation.definition.string.begin\", \"punctuation.definition.string.end\"],\n      \"settings\": {\n        \"foreground\": \"#dee492\"\n      }\n    }, {\n      \"name\": \"Property quotes (temporary vscode fix)\",\n      \"scope\": [\"punctuation.support.type.property-name.begin\", \"punctuation.support.type.property-name.end\"],\n      \"settings\": {\n        \"foreground\": \"#97e2f2\"\n      }\n    }, {\n      \"name\": \"Docstrings\",\n      \"scope\": [\"string.quoted.docstring.multi\", \"string.quoted.docstring.multi.python punctuation.definition.string.begin\", \"string.quoted.docstring.multi.python punctuation.definition.string.end\", \"string.quoted.docstring.multi.python constant.character.escape\"],\n      \"settings\": {\n        \"foreground\": \"#7b7f8b\"\n      }\n    }, {\n      \"name\": \"Variables and object properties\",\n      \"scope\": [\"variable\", \"constant.other.key.perl\", \"support.variable.property\", \"variable.other.constant.js\", \"variable.other.constant.ts\", \"variable.other.constant.tsx\"],\n      \"settings\": {\n        \"foreground\": \"#f6f6f4\"\n      }\n    }, {\n      \"name\": \"Destructuring / aliasing reference name (LHS)\",\n      \"scope\": [\"meta.import variable.other.readwrite\", \"meta.variable.assignment.destructured.object.coffee variable\"],\n      \"settings\": {\n        \"fontStyle\": \"italic\",\n        \"foreground\": \"#FFB86C\"\n      }\n    }, {\n      \"name\": \"Destructuring / aliasing variable name (RHS)\",\n      \"scope\": [\"meta.import variable.other.readwrite.alias\", \"meta.export variable.other.readwrite.alias\", \"meta.variable.assignment.destructured.object.coffee variable variable\"],\n      \"settings\": {\n        \"fontStyle\": \"normal\",\n        \"foreground\": \"#f6f6f4\"\n      }\n    }, {\n      \"name\": \"GraphQL keys\",\n      \"scope\": [\"meta.selectionset.graphql variable\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\"\n      }\n    }, {\n      \"name\": \"GraphQL function arguments\",\n      \"scope\": [\"meta.selectionset.graphql meta.arguments variable\"],\n      \"settings\": {\n        \"foreground\": \"#f6f6f4\"\n      }\n    }, {\n      \"name\": \"GraphQL fragment name (definition)\",\n      \"scope\": [\"entity.name.fragment.graphql\", \"variable.fragment.graphql\"],\n      \"settings\": {\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"Edge cases (foreground color resets)\",\n      \"scope\": [\"constant.other.symbol.hashkey.ruby\", \"keyword.operator.dereference.java\", \"keyword.operator.navigation.groovy\", \"meta.scope.for-loop.shell punctuation.definition.string.begin\", \"meta.scope.for-loop.shell punctuation.definition.string.end\", \"meta.scope.for-loop.shell string\", \"storage.modifier.import\", \"punctuation.section.embedded.begin.tsx\", \"punctuation.section.embedded.end.tsx\", \"punctuation.section.embedded.begin.jsx\", \"punctuation.section.embedded.end.jsx\", \"punctuation.separator.list.comma.css\", \"constant.language.empty-list.haskell\"],\n      \"settings\": {\n        \"foreground\": \"#f6f6f4\"\n      }\n    }, {\n      \"name\": \"Shell variables prefixed with \\\"$\\\" (edge case)\",\n      \"scope\": [\"source.shell variable.other\"],\n      \"settings\": {\n        \"foreground\": \"#bf9eee\"\n      }\n    }, {\n      \"name\": \"Powershell constants mistakenly scoped to `support`, rather than `constant` (edge)\",\n      \"scope\": [\"support.constant\"],\n      \"settings\": {\n        \"fontStyle\": \"normal\",\n        \"foreground\": \"#bf9eee\"\n      }\n    }, {\n      \"name\": \"Makefile prerequisite names\",\n      \"scope\": [\"meta.scope.prerequisites.makefile\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\"\n      }\n    }, {\n      \"name\": \"SCSS attibute selector strings\",\n      \"scope\": [\"meta.attribute-selector.scss\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\"\n      }\n    }, {\n      \"name\": \"SCSS attribute selector brackets\",\n      \"scope\": [\"punctuation.definition.attribute-selector.end.bracket.square.scss\", \"punctuation.definition.attribute-selector.begin.bracket.square.scss\"],\n      \"settings\": {\n        \"foreground\": \"#f6f6f4\"\n      }\n    }, {\n      \"name\": \"Haskell Pragmas\",\n      \"scope\": [\"meta.preprocessor.haskell\"],\n      \"settings\": {\n        \"foreground\": \"#7b7f8b\"\n      }\n    }, {\n      \"name\": \"Log file error\",\n      \"scope\": [\"log.error\"],\n      \"settings\": {\n        \"foreground\": \"#ee6666\",\n        \"fontStyle\": \"bold\"\n      }\n    }, {\n      \"name\": \"Log file warning\",\n      \"scope\": [\"log.warning\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\",\n        \"fontStyle\": \"bold\"\n      }\n    }]\n  },\n  \"skipLanguages\": [],\n  \"filepath\": undefined\n};\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    p: \"p\",\n    h2: \"h2\",\n    code: \"code\"\n  }, _provideComponents(), props.components), {CH} = _components;\n  if (!CH) _missingMdxReference(\"CH\", false);\n  if (!CH.Code) _missingMdxReference(\"CH.Code\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      children: \"Basic Subscriptions\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The ability to subscribe to changes in database state is a key feature of\\nFirestore that distinguishes it from other databases. For any query we can\\nmake, we can create a listener that receives updates whenever the database\\nchanges in a way that would affect that query's results.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Supporting this feature introduces significant system design complications\\nthough. A naive approach would have each listener poll our database for\\nupdates. This quickly becomes unscaleable because the polling would repeatedly\\nsend the same queries to the database regardless of whether the query results\\nhave changed. Even at a small scale, this approach would hammer our database\\nwith expensive requests, almost none of which would return new information to the\\nclient.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"A better approach is to check for updates when we write to the database and send\\nan update to any subscribed queries that are affected by a particular write.\\nThis raises another issue though. Assuming we have a large number of users each\\nwith their own set of subscriptions, we can't just check every subscribed query\\nto see if it is affected by an update every time we write to the database.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"When we write a document to the database, we need a way to efficiently select\\nthe set of subscriptions that are affected by the write. In short, we need to\\nquery the set of database subscriptions.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Select subscriptions affected by a write\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To that end, we will create a table, \", _jsx(_components.code, {\n        children: \"basic_subscriptions\"\n      }), \", where we will\\ntrack subscriptions to documents, collections, and collection groups\"]\n    }), \"\\n\", _jsx(CH.Code, {\n      codeConfig: chCodeConfig,\n      northPanel: {\n        \"tabs\": [\"\"],\n        \"active\": \"\",\n        \"heightRatio\": 1\n      },\n      files: [{\n        \"name\": \"\",\n        \"focus\": \"\",\n        \"code\": {\n          \"lines\": [{\n            \"tokens\": [{\n              \"content\": \"CREATE\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"TABLE\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"basic_subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \" (\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  collection_parent_path      \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"TEXT\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  collection_id               \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"TEXT\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  document_id                 \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"TEXT\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  subscription_id             \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"TEXT\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"PRIMARY KEY\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" (subscription_id)\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \");\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }],\n          \"lang\": \"sql\"\n        },\n        \"annotations\": []\n      }]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Each row represents a subscription and the relevant identifiers for it. A\\nsubscription to a document will specify all three document identifiers,\\ncollection_parent_path, collection_id, and document_id, a subscription to a\\ncollection will leave document_id null, and a subscription to a collection group\\nwill leave both collection_parent_path and document_id null.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"So that we can query these values efficiently, we'll create the index\"\n    }), \"\\n\", _jsx(CH.Code, {\n      codeConfig: chCodeConfig,\n      northPanel: {\n        \"tabs\": [\"\"],\n        \"active\": \"\",\n        \"heightRatio\": 1\n      },\n      files: [{\n        \"name\": \"\",\n        \"focus\": \"\",\n        \"code\": {\n          \"lines\": [{\n            \"tokens\": [{\n              \"content\": \"CREATE\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"INDEX\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"basic_subscriptions_idx\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"ON\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" basic_subscriptions(collection_parent_path, collection_id, document_id);\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }],\n          \"lang\": \"sql\"\n        },\n        \"annotations\": []\n      }]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Now we can write a function that will take a document id and return any\\nsubscriptions affected by that document.\"\n    }), \"\\n\", _jsx(CH.Code, {\n      codeConfig: chCodeConfig,\n      northPanel: {\n        \"tabs\": [\"\"],\n        \"active\": \"\",\n        \"heightRatio\": 1\n      },\n      files: [{\n        \"name\": \"\",\n        \"focus\": \"\",\n        \"code\": {\n          \"lines\": [{\n            \"tokens\": [{\n              \"content\": \"pub\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"fn\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"get_matching_basic_subscription_ids\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  transaction\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026mut\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"Transaction\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  collection_parent_path\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"str\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  collection_id\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"str\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  document_id\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"str\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \") \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"-\u003e\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"Vec\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \"\u003c\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"String\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \"\u003e\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"{\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"let\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" document_subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"Vec\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \"\u003c\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"String\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \"\u003e \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" transaction\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"query\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"SELECT subscription_id\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    from basic_subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    where collection_parent_path=$1 and collection_id=$2 and document_id=$3\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"[\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"collection_parent_path, \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"collection_id, \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"document_id],\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  )\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"unwrap\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"()\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"iter\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"()\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"map\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"|\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"x\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"|\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" x\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"get\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"0\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#BF9EEE\"\n                }\n              }\n            }, {\n              \"content\": \"))\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"collect\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"();\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"let\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" collection_subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"Vec\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \"\u003c\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"String\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \"\u003e \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" transaction\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"query\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"SELECT subscription_id\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    from basic_subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    where collection_parent_path=$1 and collection_id=$2 and \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    document_id IS NULL\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"[\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"collection_parent_path, \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"collection_id],\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  )\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"unwrap\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"()\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"iter\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"()\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"map\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"|\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"x\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"|\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" x\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"get\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"0\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#BF9EEE\"\n                }\n              }\n            }, {\n              \"content\": \"))\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"collect\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"();\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"let\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" collection_group_subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"Vec\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \"\u003c\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"String\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \"\u003e \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" transaction\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"query\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"SELECT subscription_id\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    from basic_subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    where collection_parent_path IS NULL and collection_id=$1 and \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    document_id IS NULL\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"[\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"collection_id],\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  )\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"unwrap\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"()\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"iter\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"()\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"map\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"|\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"x\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"|\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" x\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"get\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"0\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#BF9EEE\"\n                }\n              }\n            }, {\n              \"content\": \"))\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"collect\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"();\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"let\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" all_matching_subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"Vec\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \"\u003c\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"String\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \"\u003e \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    document_subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"into_iter\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"()\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"      \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"chain\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(collection_subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"into_iter\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"())\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"      \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"chain\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(collection_group_subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"into_iter\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"())\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"      \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"collect\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"();\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  all_matching_subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"}\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }],\n          \"lang\": \"rust\"\n        },\n        \"annotations\": []\n      }]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This function runs three queries on the basic_subscriptions table,\\nselecting document, collection, and collection group subscriptions\\nthat match the specified document's identifiers.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"To identify the subscriptions affected by a write, we will then add\\nthat function to our create and delete document methods.\"\n    }), \"\\n\", _jsx(CH.Code, {\n      codeConfig: chCodeConfig,\n      northPanel: {\n        \"tabs\": [\"\"],\n        \"active\": \"\",\n        \"heightRatio\": 1\n      },\n      files: [{\n        \"name\": \"\",\n        \"focus\": \"14:17\",\n        \"code\": {\n          \"lines\": [{\n            \"tokens\": [{\n              \"content\": \"fn\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"create_document\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  transaction\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026mut\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"Transaction\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  collection_parent_path\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"str\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  collection_id\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"str\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  document_id\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"str\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  update_id\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"str\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  document\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"Document\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \") {\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"let\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"mut\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" encoded_document\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"Vec\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \"\u003c\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"u8\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \"\u003e \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"vec!\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"[];\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  document\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"encode\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026mut\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" encoded_document)\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"unwrap\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"();\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"add_document_to_documents_table\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(transaction, collection_parent_path, collection_id, document_id, update_id, \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"encoded_document);\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"let\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"mut\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" matching_subscriptions \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"vec!\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"[];\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  matching_subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"extend\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"get_matching_basic_subscription_ids\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(transaction, collection_parent_path, \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"      collection_id, document_id)\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"into_iter\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"());\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  // Todo: send update to matching subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#7B7F8B\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"}\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }],\n          \"lang\": \"rust\"\n        },\n        \"annotations\": []\n      }]\n    }), \"\\n\", _jsx(CH.Code, {\n      codeConfig: chCodeConfig,\n      northPanel: {\n        \"tabs\": [\"\"],\n        \"active\": \"\",\n        \"heightRatio\": 1\n      },\n      files: [{\n        \"name\": \"\",\n        \"focus\": \"10:14\",\n        \"code\": {\n          \"lines\": [{\n            \"tokens\": [{\n              \"content\": \"pub\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"fn\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"delete_document\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  transaction\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026mut\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"Transaction\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  collection_parent_path\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"str\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  collection_id\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"str\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  document_id\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"str\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \") {\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"if\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"let\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"Some\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \"(document) \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"get_document\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(transaction, collection_parent_path, collection_id, document_id) {\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"delete_document_from_documents_table\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(transaction, collection_parent_path, collection_id, document_id);\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"let\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"mut\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" matching_subscriptions \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"vec!\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"[];\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    matching_subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"extend\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"      \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"get_matching_basic_subscription_ids\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(transaction, collection_parent_path, \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"        collection_id, document_id)\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"into_iter\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"());\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    // Todo: send update to matching subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#7B7F8B\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  }\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"}\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }],\n          \"lang\": \"rust\"\n        },\n        \"annotations\": []\n      }]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Later in the series, we will show how we will actually deliver updates to these\\nsubscriptions. For now, we know that whenever we write to the\\ndatabase we can efficiently get the list of subscriptions that need to receive an update.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Subscribing to a query\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To support subscribing to a query in the first place, we will create another table \", _jsx(_components.code, {\n        children: \"client_subscriptions\"\n      }), \",\"]\n    }), \"\\n\", _jsx(CH.Code, {\n      codeConfig: chCodeConfig,\n      northPanel: {\n        \"tabs\": [\"\"],\n        \"active\": \"\",\n        \"heightRatio\": 1\n      },\n      files: [{\n        \"name\": \"\",\n        \"focus\": \"\",\n        \"code\": {\n          \"lines\": [{\n            \"tokens\": [{\n              \"content\": \"CREATE\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"TABLE\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"client_subscriptions\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \" (\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  subscription_id     \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"TEXT\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  client_id           \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"TEXT\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \");\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }],\n          \"lang\": \"sql\"\n        },\n        \"annotations\": []\n      }]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"When a client subscribes to a query we will generate a new subscription id and\\nput it into this table along with the client's id. Then we insert a new row in \", _jsx(_components.code, {\n        children: \"basic_subscriptions\"\n      }), \"\\nfor the query, as shown in this \", _jsx(_components.code, {\n        children: \"subscribe_to_document\"\n      }), \" function\"]\n    }), \"\\n\", _jsx(CH.Code, {\n      codeConfig: chCodeConfig,\n      northPanel: {\n        \"tabs\": [\"\"],\n        \"active\": \"\",\n        \"heightRatio\": 1\n      },\n      files: [{\n        \"name\": \"\",\n        \"focus\": \"\",\n        \"code\": {\n          \"lines\": [{\n            \"tokens\": [{\n              \"content\": \"pub\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"fn\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"subscribe_to_document\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  transaction\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026mut\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"Transaction\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  client_id\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"str\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  collection_parent_path\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"str\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  collection_id\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"str\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  document_id\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"str\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \") \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"-\u003e\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"String\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"{\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"let\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" subscription_id\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"String\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"Uuid\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#97E1F1\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \"::\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"new_v4\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"()\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"as_simple\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"()\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"to_string\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"();\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  transaction\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"execute\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"insert into client_subscriptions values ($1, $2)\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"                      \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"[\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"subscription_id, \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"client_id])\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"unwrap\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"();\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  transaction\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"execute\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"insert into basic_subscriptions values ($1, $2, $3, $4)\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"                      \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"[\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"collection_parent_path, \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"collection_id, \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"document_id, \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\u0026\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"subscription_id])\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \".\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \"unwrap\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"();\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  // Todo: send client first batch of subscribed query data\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#7B7F8B\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  subscription_id\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"}\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }],\n          \"lang\": \"rust\"\n        },\n        \"annotations\": []\n      }]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In practice, we would have this subscription function also return the initial query results as indicated in the todo.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Next up\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"We can now read and write documents to our database and subscribe to document\\nchanges, but we can't query collections based on document data. Let's fix that.\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  chCodeConfig,\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}},"title":"Basic Subscriptions","index":6,"previousPost":{"title":"Transactions","index":5,"slug":"transactions"},"nextPost":{"title":"Simple Queries: A First Attempt","index":7,"slug":"queries-first-attempt"}},"__N_SSG":true},"page":"/posts/[[...slug]]","query":{"slug":["basic-subscriptions"]},"buildId":"5zbzbXu7hqqmOa1SSHoRT","assetPrefix":"/diy-firestore","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>