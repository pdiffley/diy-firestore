<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>DIY Firestore: <!-- -->Defining Our Requirements</title><meta name="next-head-count" content="3"/><link rel="preload" href="/diy-firestore/_next/static/css/66a0bbf2b9cf8488.css" as="style"/><link rel="stylesheet" href="/diy-firestore/_next/static/css/66a0bbf2b9cf8488.css" data-n-g=""/><link rel="preload" href="/diy-firestore/_next/static/css/ada12569730546bb.css" as="style"/><link rel="stylesheet" href="/diy-firestore/_next/static/css/ada12569730546bb.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/diy-firestore/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/diy-firestore/_next/static/chunks/webpack-df07c8c7f42d9fe8.js" defer=""></script><script src="/diy-firestore/_next/static/chunks/framework-85abacfba991a725.js" defer=""></script><script src="/diy-firestore/_next/static/chunks/main-319ff90b30ad4d29.js" defer=""></script><script src="/diy-firestore/_next/static/chunks/pages/_app-4394fb9185eabbc7.js" defer=""></script><script src="/diy-firestore/_next/static/chunks/9f529197-49e08325ab61b49d.js" defer=""></script><script src="/diy-firestore/_next/static/chunks/97-3f87bb423d54673c.js" defer=""></script><script src="/diy-firestore/_next/static/chunks/pages/posts/%5B%5B...slug%5D%5D-0bd81a0611356f07.js" defer=""></script><script src="/diy-firestore/_next/static/TzcNXjE2H_8iZRqU7ysyl/_buildManifest.js" defer=""></script><script src="/diy-firestore/_next/static/TzcNXjE2H_8iZRqU7ysyl/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="post_content__PPM5L"><nav class="post_nav__Q8sPv"><div class="post_homeLink__F688Z"><a href="/diy-firestore/">DIY Firestore</a></div></nav><main id="main-content"><article class="post_article__Q7gsU"><h1>Defining Our Requirements</h1>
<p>Before we can talk about implementation details, we need to specify what the
requirements for our database will be. I will be basing our requirement list
directly off of Firestore&#x27;s feature list. The sections below
give a lightning round description of the features we will be implementing, and
specify some <strong>key terms</strong> that I will be using over the course of this
series. If you are already well acquainted with Firestore&#x27;s features feel free
to skim or skip to the summary at the bottom. Alternatively, if you have no idea
how Firestore works at all, it could be helpful to read the <a href="https://firebase.google.com/docs/firestore">Firestore&#x27;s docs</a>
which explain Firestore&#x27;s features in more detail.</p>
<h2>Data Organization</h2>
<h3>Documents and Collections</h3>
<p>Our data model is going to be nearly identical to Firestore&#x27;s. We will be
storing <strong>documents</strong> of key-value pairs inside <strong>collections</strong>. Every
document will have a string identifier, <strong>document_id</strong> and will be the child of a
collection with its own string identifier, <strong>collection_id</strong>. Consider the
chat room example from the
<a href="https://firebase.google.com/docs/firestore/data-model#hierarchical-data">Firestore documentation</a>.</p>
<div class="collection"><div class="document-title"> <img alt="drawing" src="/images/collection-dark.png" width="30" height="30" decoding="async" data-nimg="1" loading="lazy" style="color:transparent"/> <div class="document-name"> rooms </div> </div><div class="collections-tabbed"><div class="document-title"><img alt="drawing" src="/images/document-dark.png" width="30" height="30" decoding="async" data-nimg="1" loading="lazy" style="color:transparent"/> <div class="document-name"> roomA </div> </div><div class="collections-tabbed"><code>name : &#x27;Chat Room A&#x27;</code></div></div><div class="collections-tabbed"><div class="document-title"><img alt="drawing" src="/images/document-dark.png" width="30" height="30" decoding="async" data-nimg="1" loading="lazy" style="color:transparent"/> <div class="document-name"> roomB </div> </div><div class="collections-tabbed"><code>name : &#x27;Chat Room B&#x27;</code></div></div></div>
<p>We have a collection with a collection_id <code>rooms</code>. It holds multiple documents
which each represent a chat room. The two documents shown have document_id <code>roomA</code>
and <code>roomB</code>. Each of our chat room documents have a <strong>field</strong> with the
<strong>key</strong> <code>name</code> and a string <strong>value</strong> holding the chat room&#x27;s descriptive
name.</p>
<h3>Subcollections</h3>
<p>Our documents can also have subcollections. In this case, we will give each chat
room a subcollection, <code>messages</code>.</p>
<div class="collection"><div class="document-title"> <img alt="drawing" src="/images/collection-dark.png" width="30" height="30" decoding="async" data-nimg="1" loading="lazy" style="color:transparent"/> <div class="document-name"> rooms </div> </div><div class="collections-tabbed"><div class="document-title"><img alt="drawing" src="/images/document-dark.png" width="30" height="30" decoding="async" data-nimg="1" loading="lazy" style="color:transparent"/> <div class="document-name"> roomA </div> </div><div class="collections-tabbed"><code>name : &#x27;Chat Room A&#x27;</code></div><div class="collections-tabbed"><div class="collections-tabbed"><div class="collection"><div class="document-title"> <img alt="drawing" src="/images/collection-dark.png" width="30" height="30" decoding="async" data-nimg="1" loading="lazy" style="color:transparent"/> <div class="document-name"> messages </div> </div><div class="collections-tabbed"><div class="document-title"><img alt="drawing" src="/images/document-dark.png" width="30" height="30" decoding="async" data-nimg="1" loading="lazy" style="color:transparent"/> <div class="document-name"> message1 </div> </div><div class="collections-tabbed"><code>from : &#x27;alex&#x27;</code></div><div class="collections-tabbed"><code>message : &#x27;Hello World!&#x27;</code></div><div class="collections-tabbed"><code>messageCount: 0</code></div></div><div class="collections-tabbed"><div class="document-title"><img alt="drawing" src="/images/document-dark.png" width="30" height="30" decoding="async" data-nimg="1" loading="lazy" style="color:transparent"/> <div class="document-name"> message2 </div> </div><div class="collections-tabbed"><code>from : &#x27;mary&#x27;</code></div><div class="collections-tabbed"><code>message : &#x27;Hello Worlds!&#x27;</code></div><div class="collections-tabbed"><code>messageCount: 1</code></div></div></div></div></div></div><div class="collections-tabbed"><div class="document-title"><img alt="drawing" src="/images/document-dark.png" width="30" height="30" decoding="async" data-nimg="1" loading="lazy" style="color:transparent"/> <div class="document-name"> roomB </div> </div><div class="collections-tabbed"><code>name : &#x27;Chat Room B&#x27;</code></div><div class="collections-tabbed"><div class="collections-tabbed"><div class="collection"><div class="document-title"> <img alt="drawing" src="/images/collection-dark.png" width="30" height="30" decoding="async" data-nimg="1" loading="lazy" style="color:transparent"/> <div class="document-name"> messages </div> </div><div class="collections-tabbed"><div class="document-title"><img alt="drawing" src="/images/document-dark.png" width="30" height="30" decoding="async" data-nimg="1" loading="lazy" style="color:transparent"/> <div class="document-name"> message1 </div> </div><div class="collections-tabbed"><code>from : &#x27;jeff&#x27;</code></div><div class="collections-tabbed"><code>message : &#x27;Lorem&#x27;</code></div><div class="collections-tabbed"><code>messageCount: 0</code></div></div><div class="collections-tabbed"><div class="document-title"><img alt="drawing" src="/images/document-dark.png" width="30" height="30" decoding="async" data-nimg="1" loading="lazy" style="color:transparent"/> <div class="document-name"> message2 </div> </div><div class="collections-tabbed"><code>from : &#x27;alex&#x27;</code></div><div class="collections-tabbed"><code>message : &#x27;Ipsum&#x27;</code></div><div class="collections-tabbed"><code>messageCount: 1</code></div></div></div></div></div></div></div>
<p>The <code>messages</code> subcollection holds all of the messages in the chat room. In this
case, each message document has three fields, <code>from</code>, <code>message</code>, and
<code>messageCount</code> which store the name of the message&#x27;s sender, the content of the
message, and the number of messages that have been sent.</p>
<h3>Document Identifiers and Uniqueness</h3>
<p>Documents and collections are uniquely identified in the database by the path
from their root collection. This includes all parent collections and document
ids.</p>
<p>For example, the full unique identifier for the <code>messages</code> collection in <code>roomA</code> is
<code>&quot;/rooms/roomA/messages&quot;</code></p>
<p>and the full unique identifier for <code>message1</code> in <code>roomA</code> is
<code>&quot;/rooms/roomA/messages/message1&quot;</code></p>
<p>We will break these unique identifiers into three components. The first two,
<strong>document_id</strong> and <strong>collection_id</strong>, we have already seen. The third is
<strong>collection_parent_path</strong> and encompasses everything in a documents unique
path prior to it&#x27;s collection. For example, the collection_parent_path for the
messages collection above is <code>&quot;/rooms/roomA&quot;</code>. The collection_parent_path for top
level collections (eg. rooms) is just an empty string.</p>
<p>In general the unique identifier for any collection takes the form</p>
<p><code>&quot;/&lt;collection_parent_path&gt;/&lt;collection_id&gt;/&quot;</code></p>
<p>and the unique identifier for any document takes the form</p>
<p><code>&quot;/&lt;collection_parent_path&gt;/&lt;collection_id&gt;/&lt;document_id&gt;&quot;</code></p>
<h2>Data Types</h2>
<p>Firestore allows documents to have values of the following datatypes</p>
<p>Null<br/>
<!-- -->Boolean<br/>
<!-- -->64 bit Integer<br/>
<!-- -->64 bit Float<br/>
<!-- -->DateTime<br/>
<!-- -->String<br/>
<!-- -->Bytes<br/>
<!-- -->Document Reference<br/>
<!-- -->Geographic Point<br/>
<!-- -->Array<br/>
<!-- -->Map</p>
<p>We will support all of these types except Array, Map, and Geographic Point.
Supporting Array and Map types is very doable, but including these types
initially will muddle the explanation of some the more fundamental concepts our
database will utilize. The geographic point type is currently not
recommended for use, so I am just going to ignore it entirely.</p>
<p>Because documents can have values with different types for the same field key,
we need a consistent way to compare field values with different types. For this
purpose the different types will be ordered based on their position in the list
above (ie. a null type is always less than a boolean type which is always less
than an integer and so on). The only exception to this is that integers and floats
will be ordered based on their numberic value (eg. <code>1 &lt; 2.5 &lt; 3 &lt; 3.5</code>).</p>
<h2>Queries</h2>
<p>Following <a href="https://firebase.google.com/docs/firestore/query-data/queries">Firestore&#x27;s terminolgy</a>,
we will classify queries as either <strong>simple</strong> or <strong>compound</strong> and will allow queries on
<strong>collections</strong> as well as <strong>collection groups</strong>. A collection group is any group of collections
that have the same collection_id.</p>
<h3>Simple Queries</h3>
<p>Simple queries have only one constraint. Using our message room example from
above, if we wanted to get all of the messages in roomA that were sent by &quot;alex&quot;
we could write the query,</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>query(&quot;rooms/roomA/messages&quot;, where(&quot;from&quot;, &quot;=&quot;, &quot;alex&quot;));</span></div></div><br/></code></div></div>
<p>We will support simple queries on all document fields for the operators <code>&lt;</code>,
<code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>==</code>, and <code>!=</code> without advanced notice that the query will be
made (ie. without the need to make a new index for the query).</p>
<h3>Collection Groups</h3>
<p>We will also support queries on <strong>collection groups</strong>. A collection group is a
set of collections that all have the same collection_id. If we wanted to get all
of the messages sent by &quot;alex&quot; to any chat room, we could write</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>query(collectionGroup(&#x27;messages&#x27;), where(&#x27;from&#x27;, &#x27;=&#x27;, &#x27;alex&#x27;))</span></div></div><br/></code></div></div>
<p>This will retrieve all of the messages with sender &quot;alex&quot; from all messages
subcollections.</p>
<h3>Compound Queries</h3>
<p>Compound queries allow you to specify multiple constraints. If we wanted to get
messages sent by &quot;alex&quot; that were in the first 500 messages sent to roomA we
could write the query</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>query(</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  &quot;rooms/roomA/messages&quot;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  where(&quot;from&quot;, &quot;=&quot;, &quot;alex&quot;),</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  where(&quot;messageCount&quot;, &quot;&lt;&quot;, 500)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>);</span></div></div><br/></code></div></div>
<p>Compound queries have some restrictions though. First, we will require that
fields used in a compound query be specified in advance in a <strong>composite field
group</strong> (see the next section for details). Second, only one field in the query
can have a non-equality operator (<code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>!=</code>) placed on it. All
other fields can only be constrained by the equality operator. For example, the
query</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>query(</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  &quot;rooms/roomA/messages&quot;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  where(&quot;from&quot;, &quot;!=&quot;, &quot;alex&quot;),</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  where(&quot;messageCount&quot;, &quot;&lt;&quot;, 500)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>);</span></div></div><br/></code></div></div>
<p>would not be allowed. But why would you want to exclude Alex anyway?</p>
<h3>Composite Field Groups</h3>
<p>Before we can make a compound query on a set of fields, we will require the user
to specifiy a <strong>composite field group</strong>, this will allow us to make the tables
and indexes required to support the query. For the above query, we would specify the
composite fields</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  collectionPath: &quot;/rooms/roomA/messages&quot;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  groupType: &quot;COLLECTION&quot;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  fields: [&quot;from&quot;, &quot;messageCount&quot;]</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br/></code></div></div>
<p>Here we indicate that we are specifying we want to run queries on the
collection <code>/rooms/roomA/messages</code>, and that we want include
the fields &quot;from&quot; and &quot;messageCount&quot; in a single query.</p>
<p>This only lets us run queries on one <code>messages</code> collection though (the one that
is a child to <code>roomA</code>). Most likely, we would want to run queries on all <code>messages</code>
collections. To do that we would specify the composite group below.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>{</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  collectionPath: &quot;messages&quot;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  groupType: &quot;COLLECTION_GROUP&quot;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  fields: [&quot;from&quot;, &quot;messageCount&quot;]</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>}</span></div></div><br/></code></div></div>
<p>Here we indicate that we are specifying the group of composite fields for all
individual collections with collection_id <code>messages</code>. We can the run queries over
that collection group.</p>
<p>In this series, we are going to assume that we have already parsed a config file that
specifies all of the composite groups that will be queried. For a production
database, we would want to be able to update this config dynamically and also be able to specify
the relative order that the fields will be sorted in by default, but those two features will be
out of scope for this series.</p>
<h2>Subscriptions</h2>
<p>One of the key features of Firestore is that our client side applications can
subscribe to changes in collections and queries and be notified with updates are
made in real time. We could create the subscription below to print messages sent
from Alex to roomA.</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>let q = query(</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  &quot;rooms/roomA/messages&quot;,</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  where(&quot;from&quot;, &quot;==&quot;, &quot;alex&quot;),</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  where(&quot;messageCount&quot;, &quot;&lt;&quot;, 500)</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span></span></div></div><div><div style="display:inline-block;margin-left:16px"><span>let unsubscribeHandler = onSnapshot(q, (querySnapshot) =&gt; {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  const messages = [];</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  querySnapshot.forEach((doc) =&gt; {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>    messages.push(doc.data().message);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  });</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  console.log(messages);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>});</span></div></div><br/></code></div></div>
<p>Every time Alex sends a message to the chat room, the results of the query will
change and our subscription will receive the updated list of messages. Once new
messages from Alex have a <code>messageCount</code> greater than 500, the subscription will
stop firing because a new message will not change the query results.</p>
<p>We will also support subscriptions to changes in individual documents,
collections, and collection groups.</p>
<h2>Optimistic Transactions</h2>
<p>Like Firestore, we will support client side transactions with
<a href="https://firebase.google.com/docs/firestore/transaction-data-contention#data_contention_in_the_mobileweb_sdks">optimistic concurrency</a>.
For example, if we wanted our client side app to be able to update the <code>count</code>
field in the document <code>counter</code> in collection <code>counter_collection</code>, we could
write the transaction</p>
<div class="ch-codeblock not-prose "><div class="ch-code" style="margin:0;padding:0;position:relative;white-space:pre;box-sizing:content-box;opacity:0;overflow:auto"><code class="ch-code-scroll-parent"><br/><div><div style="display:inline-block;margin-left:16px"><span>await runTransaction(db, async (transaction) =&gt; {</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  let counterDoc = await transaction.get(&quot;/counter_collection/counter&quot;);</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  let currentCount = counterDoc.data().count;</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>  transaction.update(&quot;/counter_collection/counter&quot;, { count: currentCount + 1 });</span></div></div><div><div style="display:inline-block;margin-left:16px"><span>});</span></div></div><br/></code></div></div>
<p>This code will read the counter document, update it with the new value and rollback
if there was contention. Like Firestore, we will require that all reads made in a
transaction be made before any writes.</p>
<h2>Pessimistic Transactions</h2>
<p>Optimistic transactions fail automatically if there is contention around a
document write. This makes them ill suited for cases where multiple clients are
likely to be writing to the same document at the same time. Firestore advertises
that it has server side transactions that run with
<a href="https://firebase.google.com/docs/firestore/transaction-data-contention#data_contention_in_the_server_client_libraries">pessimistic concurrency</a>,
but there is
<a href="https://github.com/googleapis/nodejs-firestore/issues/785">some contention</a>
(sorry) over how effective their pessimistic concurrency controls are.
Firestore&#x27;s pessimistic concurrency ensures that when there is contention on a
document at least one transaction attempting to modify the document can
complete, but all other transactions attempting to modify the document will have
to retry and will ultimately fail if the 5 retry limit is reached. This is
instead of queuing the contested transactions and completing them in the order
they were made. Personally, when I have used Firestore&#x27;s server side transactions in the
past, they did not live up to my expectations for how a pessimistic transaction
should behave. We are going to leave pessimistic transactions out of this series&#x27; implementation.</p>
<h2>Client Libraries</h2>
<p>Firestore&#x27;s client libraries play an important role in making the database useable,
manageing subscriptions and transactions for example. However, in this series, I will
only be demonstrating the server side code needed to support the database.</p>
<p>We are also going to hopscotch right over security rules. For this series, we will assume
that any requests have already passed through an auth layer.</p>
<h2>Summary</h2>
<ul>
<li>
<p>Our database will store <strong>documents</strong> and in heirarchical <strong>collections</strong>.</p>
</li>
<li>
<p>Collections are uniquely identified by their <strong>collection_id</strong> and
<strong>collection_parent_path</strong></p>
</li>
<li>
<p>A document is uniquely identified by their <strong>document_id</strong> and the unique
identifier of its parent collection</p>
</li>
<li>
<p>Documents consist of <strong>fields</strong> with string <strong>keys</strong> and <strong>values</strong> with one
of the following types: null, boolean, 64 bit integer, 64 bit float, DateTime,
String, Bytes, Document Reference.</p>
</li>
<li>
<p>We will support <strong>simple queries</strong> on any field with the operators (<code>&lt;</code>,
<code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>==</code>, <code>!=</code>) without the need for fields that are queried to
be specified in advance</p>
</li>
<li>
<p>We will support <strong>compound queries</strong>, but the fields that will be queried
need to be specified in advance. Additionally, non-equality operators are only
allowed on one field in a compound query.</p>
</li>
<li>
<p>Queries can be performed on an individual collections or a <strong>collection
groups</strong> (group of collections which all have the same collection_id)</p>
</li>
<li>
<p>Client side applications can subscribe to real time updates of documents,
collections, and queries.</p>
</li>
<li>
<p>We will support client side transactions with optimistic concurrency</p>
</li>
</ul>
<p>Now that we know what we are building, we can put together the foundation of our
database!</p></article></main><footer class="post_footer__wtu2H"><div><a href="/diy-firestore/posts/intro/">← <!-- -->Getting Started</a> | <a href="/diy-firestore/posts/the-basic-database/">The Database<!-- --> →</a></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"source":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nconst chCodeConfig = {\n  \"staticMediaQuery\": \"not screen, (max-width: 768px)\",\n  \"autoImport\": false,\n  \"theme\": {\n    \"$schema\": \"vscode://schemas/color-theme\",\n    \"name\": \"dracula-soft\",\n    \"author\": \"Zeno Rocha\",\n    \"maintainers\": [\"Derek P Sifford \u003cdereksifford@gmail.com\u003e\"],\n    \"semanticClass\": \"theme.dracula\",\n    \"semanticHighlighting\": true,\n    \"dracula\": {\n      \"base\": [\"#282A36\", \"#F8F8F2\", \"#44475A\", \"#6272A4\", \"#8BE9FD\", \"#50FA7B\", \"#FFB86C\", \"#FF79C6\", \"#BD93F9\", \"#FF5555\", \"#F1FA8C\"],\n      \"ansi\": [\"#21222C\", \"#FF5555\", \"#50FA7B\", \"#F1FA8C\", \"#BD93F9\", \"#FF79C6\", \"#8BE9FD\", \"#F8F8F2\", \"#6272A4\", \"#FF6E6E\", \"#69FF94\", \"#FFFFA5\", \"#D6ACFF\", \"#FF92DF\", \"#A4FFFF\", \"#FFFFFF\"],\n      \"brightOther\": [\"#E9F284\", \"#8BE9FE\"],\n      \"other\": [\"#44475A75\", \"#FFFFFF1A\", \"#FFFFFF\", \"#44475A70\", \"#424450\", \"#343746\", \"#21222C\", \"#191A21\"]\n    },\n    \"colors\": {\n      \"terminal.background\": \"#282A36\",\n      \"terminal.foreground\": \"#f6f6f4\",\n      \"terminal.ansiBrightBlack\": \"#7b7f8b\",\n      \"terminal.ansiBrightRed\": \"#f07c7c\",\n      \"terminal.ansiBrightGreen\": \"#78f09a\",\n      \"terminal.ansiBrightYellow\": \"#f6f6ae\",\n      \"terminal.ansiBrightBlue\": \"#d6b4f7\",\n      \"terminal.ansiBrightMagenta\": \"#f49dda\",\n      \"terminal.ansiBrightCyan\": \"#adf6f6\",\n      \"terminal.ansiBrightWhite\": \"#ffffff\",\n      \"terminal.ansiBlack\": \"#262626\",\n      \"terminal.ansiRed\": \"#ee6666\",\n      \"terminal.ansiGreen\": \"#62e884\",\n      \"terminal.ansiYellow\": \"#e7ee98\",\n      \"terminal.ansiBlue\": \"#bf9eee\",\n      \"terminal.ansiMagenta\": \"#f286c4\",\n      \"terminal.ansiCyan\": \"#97e1f1\",\n      \"terminal.ansiWhite\": \"#f6f6f4\",\n      \"focusBorder\": \"#7b7f8b\",\n      \"foreground\": \"#f6f6f4\",\n      \"selection.background\": \"#bf9eee\",\n      \"errorForeground\": \"#ee6666\",\n      \"button.background\": \"#44475A\",\n      \"button.foreground\": \"#f6f6f4\",\n      \"button.secondaryBackground\": \"#282A36\",\n      \"button.secondaryForeground\": \"#f6f6f4\",\n      \"button.secondaryHoverBackground\": \"#343746\",\n      \"dropdown.background\": \"#343746\",\n      \"dropdown.border\": \"#191A21\",\n      \"dropdown.foreground\": \"#f6f6f4\",\n      \"input.background\": \"#282A36\",\n      \"input.foreground\": \"#f6f6f4\",\n      \"input.border\": \"#191A21\",\n      \"input.placeholderForeground\": \"#7b7f8b\",\n      \"inputOption.activeBorder\": \"#bf9eee\",\n      \"inputValidation.infoBorder\": \"#f286c4\",\n      \"inputValidation.warningBorder\": \"#FFB86C\",\n      \"inputValidation.errorBorder\": \"#ee6666\",\n      \"badge.foreground\": \"#f6f6f4\",\n      \"badge.background\": \"#44475A\",\n      \"progressBar.background\": \"#f286c4\",\n      \"list.activeSelectionBackground\": \"#44475A\",\n      \"list.activeSelectionForeground\": \"#f6f6f4\",\n      \"list.dropBackground\": \"#44475A\",\n      \"list.focusBackground\": \"#44475A75\",\n      \"list.highlightForeground\": \"#97e1f1\",\n      \"list.hoverBackground\": \"#44475A75\",\n      \"list.inactiveSelectionBackground\": \"#44475A75\",\n      \"list.warningForeground\": \"#FFB86C\",\n      \"list.errorForeground\": \"#ee6666\",\n      \"activityBar.background\": \"#343746\",\n      \"activityBar.inactiveForeground\": \"#7b7f8b\",\n      \"activityBar.foreground\": \"#f6f6f4\",\n      \"activityBar.activeBorder\": \"#FF79C680\",\n      \"activityBar.activeBackground\": \"#BD93F910\",\n      \"activityBarBadge.background\": \"#f286c4\",\n      \"activityBarBadge.foreground\": \"#f6f6f4\",\n      \"sideBar.background\": \"#262626\",\n      \"sideBarTitle.foreground\": \"#f6f6f4\",\n      \"sideBarSectionHeader.background\": \"#282A36\",\n      \"sideBarSectionHeader.border\": \"#191A21\",\n      \"editorGroup.border\": \"#bf9eee\",\n      \"editorGroup.dropBackground\": \"#44475A70\",\n      \"editorGroupHeader.tabsBackground\": \"#191A21\",\n      \"tab.activeBackground\": \"#282A36\",\n      \"tab.activeForeground\": \"#f6f6f4\",\n      \"tab.border\": \"#191A21\",\n      \"tab.activeBorderTop\": \"#FF79C680\",\n      \"tab.inactiveBackground\": \"#262626\",\n      \"tab.inactiveForeground\": \"#7b7f8b\",\n      \"editor.foreground\": \"#f6f6f4\",\n      \"editor.background\": \"#282A36\",\n      \"editorLineNumber.foreground\": \"#7b7f8b\",\n      \"editor.selectionBackground\": \"#44475A\",\n      \"editor.selectionHighlightBackground\": \"#424450\",\n      \"editor.foldBackground\": \"#21222C80\",\n      \"editor.wordHighlightBackground\": \"#8BE9FD50\",\n      \"editor.wordHighlightStrongBackground\": \"#50FA7B50\",\n      \"editor.findMatchBackground\": \"#FFB86C80\",\n      \"editor.findMatchHighlightBackground\": \"#FFFFFF40\",\n      \"editor.findRangeHighlightBackground\": \"#44475A75\",\n      \"editor.hoverHighlightBackground\": \"#8BE9FD50\",\n      \"editor.lineHighlightBorder\": \"#44475A\",\n      \"editorLink.activeForeground\": \"#97e1f1\",\n      \"editor.rangeHighlightBackground\": \"#BD93F915\",\n      \"editor.snippetTabstopHighlightBackground\": \"#282A36\",\n      \"editor.snippetTabstopHighlightBorder\": \"#7b7f8b\",\n      \"editor.snippetFinalTabstopHighlightBackground\": \"#282A36\",\n      \"editor.snippetFinalTabstopHighlightBorder\": \"#62e884\",\n      \"editorWhitespace.foreground\": \"#FFFFFF1A\",\n      \"editorIndentGuide.background\": \"#FFFFFF1A\",\n      \"editorIndentGuide.activeBackground\": \"#FFFFFF45\",\n      \"editorRuler.foreground\": \"#FFFFFF1A\",\n      \"editorCodeLens.foreground\": \"#7b7f8b\",\n      \"editorBracketHighlight.foreground1\": \"#f6f6f4\",\n      \"editorBracketHighlight.foreground2\": \"#f286c4\",\n      \"editorBracketHighlight.foreground3\": \"#97e1f1\",\n      \"editorBracketHighlight.foreground4\": \"#62e884\",\n      \"editorBracketHighlight.foreground5\": \"#bf9eee\",\n      \"editorBracketHighlight.foreground6\": \"#FFB86C\",\n      \"editorBracketHighlight.unexpectedBracket.foreground\": \"#ee6666\",\n      \"editorOverviewRuler.border\": \"#191A21\",\n      \"editorOverviewRuler.selectionHighlightForeground\": \"#FFB86C\",\n      \"editorOverviewRuler.wordHighlightForeground\": \"#97e1f1\",\n      \"editorOverviewRuler.wordHighlightStrongForeground\": \"#62e884\",\n      \"editorOverviewRuler.modifiedForeground\": \"#8BE9FD80\",\n      \"editorOverviewRuler.addedForeground\": \"#50FA7B80\",\n      \"editorOverviewRuler.deletedForeground\": \"#FF555580\",\n      \"editorOverviewRuler.errorForeground\": \"#FF555580\",\n      \"editorOverviewRuler.warningForeground\": \"#FFB86C80\",\n      \"editorOverviewRuler.infoForeground\": \"#8BE9FD80\",\n      \"editorError.foreground\": \"#ee6666\",\n      \"editorWarning.foreground\": \"#97e1f1\",\n      \"editorGutter.modifiedBackground\": \"#8BE9FD80\",\n      \"editorGutter.addedBackground\": \"#50FA7B80\",\n      \"editorGutter.deletedBackground\": \"#FF555580\",\n      \"gitDecoration.modifiedResourceForeground\": \"#97e1f1\",\n      \"gitDecoration.deletedResourceForeground\": \"#ee6666\",\n      \"gitDecoration.untrackedResourceForeground\": \"#62e884\",\n      \"gitDecoration.ignoredResourceForeground\": \"#7b7f8b\",\n      \"gitDecoration.conflictingResourceForeground\": \"#FFB86C\",\n      \"diffEditor.insertedTextBackground\": \"#50FA7B20\",\n      \"diffEditor.removedTextBackground\": \"#FF555550\",\n      \"editorWidget.background\": \"#262626\",\n      \"editorSuggestWidget.background\": \"#262626\",\n      \"editorSuggestWidget.foreground\": \"#f6f6f4\",\n      \"editorSuggestWidget.selectedBackground\": \"#44475A\",\n      \"editorHoverWidget.background\": \"#282A36\",\n      \"editorHoverWidget.border\": \"#7b7f8b\",\n      \"editorMarkerNavigation.background\": \"#262626\",\n      \"peekView.border\": \"#44475A\",\n      \"peekViewEditor.background\": \"#282A36\",\n      \"peekViewEditor.matchHighlightBackground\": \"#F1FA8C80\",\n      \"peekViewResult.background\": \"#262626\",\n      \"peekViewResult.fileForeground\": \"#f6f6f4\",\n      \"peekViewResult.lineForeground\": \"#f6f6f4\",\n      \"peekViewResult.matchHighlightBackground\": \"#F1FA8C80\",\n      \"peekViewResult.selectionBackground\": \"#44475A\",\n      \"peekViewResult.selectionForeground\": \"#f6f6f4\",\n      \"peekViewTitle.background\": \"#191A21\",\n      \"peekViewTitleDescription.foreground\": \"#7b7f8b\",\n      \"peekViewTitleLabel.foreground\": \"#f6f6f4\",\n      \"merge.currentHeaderBackground\": \"#50FA7B90\",\n      \"merge.incomingHeaderBackground\": \"#BD93F990\",\n      \"editorOverviewRuler.currentContentForeground\": \"#62e884\",\n      \"editorOverviewRuler.incomingContentForeground\": \"#bf9eee\",\n      \"panel.background\": \"#282A36\",\n      \"panel.border\": \"#bf9eee\",\n      \"panelTitle.activeBorder\": \"#f286c4\",\n      \"panelTitle.activeForeground\": \"#f6f6f4\",\n      \"panelTitle.inactiveForeground\": \"#7b7f8b\",\n      \"statusBar.background\": \"#191A21\",\n      \"statusBar.foreground\": \"#f6f6f4\",\n      \"statusBar.debuggingBackground\": \"#ee6666\",\n      \"statusBar.debuggingForeground\": \"#191A21\",\n      \"statusBar.noFolderBackground\": \"#191A21\",\n      \"statusBar.noFolderForeground\": \"#f6f6f4\",\n      \"statusBarItem.prominentBackground\": \"#ee6666\",\n      \"statusBarItem.prominentHoverBackground\": \"#FFB86C\",\n      \"statusBarItem.remoteForeground\": \"#282A36\",\n      \"statusBarItem.remoteBackground\": \"#bf9eee\",\n      \"titleBar.activeBackground\": \"#262626\",\n      \"titleBar.activeForeground\": \"#f6f6f4\",\n      \"titleBar.inactiveBackground\": \"#191A21\",\n      \"titleBar.inactiveForeground\": \"#7b7f8b\",\n      \"extensionButton.prominentForeground\": \"#f6f6f4\",\n      \"extensionButton.prominentBackground\": \"#50FA7B90\",\n      \"extensionButton.prominentHoverBackground\": \"#50FA7B60\",\n      \"pickerGroup.border\": \"#bf9eee\",\n      \"pickerGroup.foreground\": \"#97e1f1\",\n      \"debugToolBar.background\": \"#262626\",\n      \"walkThrough.embeddedEditorBackground\": \"#262626\",\n      \"settings.headerForeground\": \"#f6f6f4\",\n      \"settings.modifiedItemIndicator\": \"#FFB86C\",\n      \"settings.dropdownBackground\": \"#262626\",\n      \"settings.dropdownForeground\": \"#f6f6f4\",\n      \"settings.dropdownBorder\": \"#191A21\",\n      \"settings.checkboxBackground\": \"#262626\",\n      \"settings.checkboxForeground\": \"#f6f6f4\",\n      \"settings.checkboxBorder\": \"#191A21\",\n      \"settings.textInputBackground\": \"#262626\",\n      \"settings.textInputForeground\": \"#f6f6f4\",\n      \"settings.textInputBorder\": \"#191A21\",\n      \"settings.numberInputBackground\": \"#262626\",\n      \"settings.numberInputForeground\": \"#f6f6f4\",\n      \"settings.numberInputBorder\": \"#191A21\",\n      \"breadcrumb.foreground\": \"#7b7f8b\",\n      \"breadcrumb.background\": \"#282A36\",\n      \"breadcrumb.focusForeground\": \"#f6f6f4\",\n      \"breadcrumb.activeSelectionForeground\": \"#f6f6f4\",\n      \"breadcrumbPicker.background\": \"#191A21\",\n      \"listFilterWidget.background\": \"#343746\",\n      \"listFilterWidget.outline\": \"#424450\",\n      \"listFilterWidget.noMatchesOutline\": \"#ee6666\"\n    },\n    \"tokenColors\": [{\n      \"settings\": {\n        \"foreground\": \"#f6f6f4\",\n        \"background\": \"#282A36\"\n      }\n    }, {\n      \"scope\": [\"emphasis\"],\n      \"settings\": {\n        \"fontStyle\": \"italic\"\n      }\n    }, {\n      \"scope\": [\"strong\"],\n      \"settings\": {\n        \"fontStyle\": \"bold\"\n      }\n    }, {\n      \"scope\": [\"header\"],\n      \"settings\": {\n        \"foreground\": \"#bf9eee\"\n      }\n    }, {\n      \"scope\": [\"meta.diff\", \"meta.diff.header\"],\n      \"settings\": {\n        \"foreground\": \"#7b7f8b\"\n      }\n    }, {\n      \"scope\": [\"markup.inserted\"],\n      \"settings\": {\n        \"foreground\": \"#62e884\"\n      }\n    }, {\n      \"scope\": [\"markup.deleted\"],\n      \"settings\": {\n        \"foreground\": \"#ee6666\"\n      }\n    }, {\n      \"scope\": [\"markup.changed\"],\n      \"settings\": {\n        \"foreground\": \"#FFB86C\"\n      }\n    }, {\n      \"scope\": [\"invalid\"],\n      \"settings\": {\n        \"foreground\": \"#ee6666\",\n        \"fontStyle\": \"underline italic\"\n      }\n    }, {\n      \"scope\": [\"invalid.deprecated\"],\n      \"settings\": {\n        \"foreground\": \"#f6f6f4\",\n        \"fontStyle\": \"underline italic\"\n      }\n    }, {\n      \"scope\": [\"entity.name.filename\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\"\n      }\n    }, {\n      \"scope\": [\"markup.error\"],\n      \"settings\": {\n        \"foreground\": \"#ee6666\"\n      }\n    }, {\n      \"name\": \"Underlined markup\",\n      \"scope\": [\"markup.underline\"],\n      \"settings\": {\n        \"fontStyle\": \"underline\"\n      }\n    }, {\n      \"name\": \"Bold markup\",\n      \"scope\": [\"markup.bold\"],\n      \"settings\": {\n        \"fontStyle\": \"bold\",\n        \"foreground\": \"#FFB86C\"\n      }\n    }, {\n      \"name\": \"Markup headings\",\n      \"scope\": [\"markup.heading\"],\n      \"settings\": {\n        \"fontStyle\": \"bold\",\n        \"foreground\": \"#bf9eee\"\n      }\n    }, {\n      \"name\": \"Markup italic\",\n      \"scope\": [\"markup.italic\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\",\n        \"fontStyle\": \"italic\"\n      }\n    }, {\n      \"name\": \"Bullets, lists (prose)\",\n      \"scope\": [\"beginning.punctuation.definition.list.markdown\", \"beginning.punctuation.definition.quote.markdown\", \"punctuation.definition.link.restructuredtext\"],\n      \"settings\": {\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"Inline code (prose)\",\n      \"scope\": [\"markup.inline.raw\", \"markup.raw.restructuredtext\"],\n      \"settings\": {\n        \"foreground\": \"#62e884\"\n      }\n    }, {\n      \"name\": \"Links (prose)\",\n      \"scope\": [\"markup.underline.link\", \"markup.underline.link.image\"],\n      \"settings\": {\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"Link text, image alt text (prose)\",\n      \"scope\": [\"meta.link.reference.def.restructuredtext\", \"punctuation.definition.directive.restructuredtext\", \"string.other.link.description\", \"string.other.link.title\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"Blockquotes (prose)\",\n      \"scope\": [\"entity.name.directive.restructuredtext\", \"markup.quote\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\",\n        \"fontStyle\": \"italic\"\n      }\n    }, {\n      \"name\": \"Horizontal rule (prose)\",\n      \"scope\": [\"meta.separator.markdown\"],\n      \"settings\": {\n        \"foreground\": \"#7b7f8b\"\n      }\n    }, {\n      \"name\": \"Code blocks\",\n      \"scope\": [\"fenced_code.block.language\", \"markup.raw.inner.restructuredtext\", \"markup.fenced_code.block.markdown punctuation.definition.markdown\"],\n      \"settings\": {\n        \"foreground\": \"#62e884\"\n      }\n    }, {\n      \"name\": \"Prose constants\",\n      \"scope\": [\"punctuation.definition.constant.restructuredtext\"],\n      \"settings\": {\n        \"foreground\": \"#bf9eee\"\n      }\n    }, {\n      \"name\": \"Braces in markdown headings\",\n      \"scope\": [\"markup.heading.markdown punctuation.definition.string.begin\", \"markup.heading.markdown punctuation.definition.string.end\"],\n      \"settings\": {\n        \"foreground\": \"#bf9eee\"\n      }\n    }, {\n      \"name\": \"Braces in markdown paragraphs\",\n      \"scope\": [\"meta.paragraph.markdown punctuation.definition.string.begin\", \"meta.paragraph.markdown punctuation.definition.string.end\"],\n      \"settings\": {\n        \"foreground\": \"#f6f6f4\"\n      }\n    }, {\n      \"name\": \"Braces in markdown blockquotes\",\n      \"scope\": [\"markup.quote.markdown meta.paragraph.markdown punctuation.definition.string.begin\", \"markup.quote.markdown meta.paragraph.markdown punctuation.definition.string.end\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\"\n      }\n    }, {\n      \"name\": \"User-defined class names\",\n      \"scope\": [\"entity.name.type.class\", \"entity.name.class\"],\n      \"settings\": {\n        \"foreground\": \"#97e1f1\",\n        \"fontStyle\": \"normal\"\n      }\n    }, {\n      \"name\": \"this, super, self, etc.\",\n      \"scope\": [\"keyword.expressions-and-types.swift\", \"keyword.other.this\", \"variable.language\", \"variable.language punctuation.definition.variable.php\", \"variable.other.readwrite.instance.ruby\", \"variable.parameter.function.language.special\"],\n      \"settings\": {\n        \"foreground\": \"#bf9eee\",\n        \"fontStyle\": \"italic\"\n      }\n    }, {\n      \"name\": \"Inherited classes\",\n      \"scope\": [\"entity.other.inherited-class\"],\n      \"settings\": {\n        \"fontStyle\": \"italic\",\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"Comments\",\n      \"scope\": [\"comment\", \"punctuation.definition.comment\", \"unused.comment\", \"wildcard.comment\"],\n      \"settings\": {\n        \"foreground\": \"#7b7f8b\"\n      }\n    }, {\n      \"name\": \"JSDoc-style keywords\",\n      \"scope\": [\"comment keyword.codetag.notation\", \"comment.block.documentation keyword\", \"comment.block.documentation storage.type.class\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"JSDoc-style types\",\n      \"scope\": [\"comment.block.documentation entity.name.type\"],\n      \"settings\": {\n        \"foreground\": \"#97e1f1\",\n        \"fontStyle\": \"italic\"\n      }\n    }, {\n      \"name\": \"JSDoc-style type brackets\",\n      \"scope\": [\"comment.block.documentation entity.name.type punctuation.definition.bracket\"],\n      \"settings\": {\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"JSDoc-style comment parameters\",\n      \"scope\": [\"comment.block.documentation variable\"],\n      \"settings\": {\n        \"foreground\": \"#FFB86C\",\n        \"fontStyle\": \"italic\"\n      }\n    }, {\n      \"name\": \"Constants\",\n      \"scope\": [\"constant\", \"variable.other.constant\"],\n      \"settings\": {\n        \"foreground\": \"#bf9eee\"\n      }\n    }, {\n      \"name\": \"Constant escape sequences\",\n      \"scope\": [\"constant.character.escape\", \"constant.character.string.escape\", \"constant.regexp\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"HTML tags\",\n      \"scope\": [\"entity.name.tag\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"CSS attribute parent selectors ('\u0026')\",\n      \"scope\": [\"entity.other.attribute-name.parent-selector\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"HTML/CSS attribute names\",\n      \"scope\": [\"entity.other.attribute-name\"],\n      \"settings\": {\n        \"foreground\": \"#62e884\",\n        \"fontStyle\": \"italic\"\n      }\n    }, {\n      \"name\": \"Function names\",\n      \"scope\": [\"entity.name.function\", \"meta.function-call.object\", \"meta.function-call.php\", \"meta.function-call.static\", \"meta.method-call.java meta.method\", \"meta.method.groovy\", \"support.function.any-method.lua\", \"keyword.operator.function.infix\"],\n      \"settings\": {\n        \"foreground\": \"#62e884\"\n      }\n    }, {\n      \"name\": \"Function parameters\",\n      \"scope\": [\"entity.name.variable.parameter\", \"meta.at-rule.function variable\", \"meta.at-rule.mixin variable\", \"meta.function.arguments variable.other.php\", \"meta.selectionset.graphql meta.arguments.graphql variable.arguments.graphql\", \"variable.parameter\"],\n      \"settings\": {\n        \"fontStyle\": \"italic\",\n        \"foreground\": \"#FFB86C\"\n      }\n    }, {\n      \"name\": \"Decorators\",\n      \"scope\": [\"meta.decorator variable.other.readwrite\", \"meta.decorator variable.other.property\"],\n      \"settings\": {\n        \"foreground\": \"#62e884\",\n        \"fontStyle\": \"italic\"\n      }\n    }, {\n      \"name\": \"Decorator Objects\",\n      \"scope\": [\"meta.decorator variable.other.object\"],\n      \"settings\": {\n        \"foreground\": \"#62e884\"\n      }\n    }, {\n      \"name\": \"Keywords\",\n      \"scope\": [\"keyword\", \"punctuation.definition.keyword\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"Keyword \\\"new\\\"\",\n      \"scope\": [\"keyword.control.new\", \"keyword.operator.new\"],\n      \"settings\": {\n        \"fontStyle\": \"bold\"\n      }\n    }, {\n      \"name\": \"Generic selectors (CSS/SCSS/Less/Stylus)\",\n      \"scope\": [\"meta.selector\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"Language Built-ins\",\n      \"scope\": [\"support\"],\n      \"settings\": {\n        \"fontStyle\": \"italic\",\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"Built-in magic functions and constants\",\n      \"scope\": [\"support.function.magic\", \"support.variable\", \"variable.other.predefined\"],\n      \"settings\": {\n        \"fontStyle\": \"regular\",\n        \"foreground\": \"#bf9eee\"\n      }\n    }, {\n      \"name\": \"Built-in functions / properties\",\n      \"scope\": [\"support.function\", \"support.type.property-name\"],\n      \"settings\": {\n        \"fontStyle\": \"regular\"\n      }\n    }, {\n      \"name\": \"Separators (key/value, namespace, inheritance, pointer, hash, slice, etc)\",\n      \"scope\": [\"constant.other.symbol.hashkey punctuation.definition.constant.ruby\", \"entity.other.attribute-name.placeholder punctuation\", \"entity.other.attribute-name.pseudo-class punctuation\", \"entity.other.attribute-name.pseudo-element punctuation\", \"meta.group.double.toml\", \"meta.group.toml\", \"meta.object-binding-pattern-variable punctuation.destructuring\", \"punctuation.colon.graphql\", \"punctuation.definition.block.scalar.folded.yaml\", \"punctuation.definition.block.scalar.literal.yaml\", \"punctuation.definition.block.sequence.item.yaml\", \"punctuation.definition.entity.other.inherited-class\", \"punctuation.function.swift\", \"punctuation.separator.dictionary.key-value\", \"punctuation.separator.hash\", \"punctuation.separator.inheritance\", \"punctuation.separator.key-value\", \"punctuation.separator.key-value.mapping.yaml\", \"punctuation.separator.namespace\", \"punctuation.separator.pointer-access\", \"punctuation.separator.slice\", \"string.unquoted.heredoc punctuation.definition.string\", \"support.other.chomping-indicator.yaml\", \"punctuation.separator.annotation\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"Brackets, braces, parens, etc.\",\n      \"scope\": [\"keyword.operator.other.powershell\", \"keyword.other.statement-separator.powershell\", \"meta.brace.round\", \"meta.function-call punctuation\", \"punctuation.definition.arguments.begin\", \"punctuation.definition.arguments.end\", \"punctuation.definition.entity.begin\", \"punctuation.definition.entity.end\", \"punctuation.definition.tag.cs\", \"punctuation.definition.type.begin\", \"punctuation.definition.type.end\", \"punctuation.section.scope.begin\", \"punctuation.section.scope.end\", \"punctuation.terminator.expression.php\", \"storage.type.generic.java\", \"string.template meta.brace\", \"string.template punctuation.accessor\"],\n      \"settings\": {\n        \"foreground\": \"#f6f6f4\"\n      }\n    }, {\n      \"name\": \"Variable interpolation operators\",\n      \"scope\": [\"meta.string-contents.quoted.double punctuation.definition.variable\", \"punctuation.definition.interpolation.begin\", \"punctuation.definition.interpolation.end\", \"punctuation.definition.template-expression.begin\", \"punctuation.definition.template-expression.end\", \"punctuation.section.embedded.begin\", \"punctuation.section.embedded.coffee\", \"punctuation.section.embedded.end\", \"punctuation.section.embedded.end source.php\", \"punctuation.section.embedded.end source.ruby\", \"punctuation.definition.variable.makefile\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"Keys (serializable languages)\",\n      \"scope\": [\"entity.name.function.target.makefile\", \"entity.name.section.toml\", \"entity.name.tag.yaml\", \"variable.other.key.toml\"],\n      \"settings\": {\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"Dates / timestamps (serializable languages)\",\n      \"scope\": [\"constant.other.date\", \"constant.other.timestamp\"],\n      \"settings\": {\n        \"foreground\": \"#FFB86C\"\n      }\n    }, {\n      \"name\": \"YAML aliases\",\n      \"scope\": [\"variable.other.alias.yaml\"],\n      \"settings\": {\n        \"fontStyle\": \"italic underline\",\n        \"foreground\": \"#62e884\"\n      }\n    }, {\n      \"name\": \"Storage\",\n      \"scope\": [\"storage\", \"meta.implementation storage.type.objc\", \"meta.interface-or-protocol storage.type.objc\", \"source.groovy storage.type.def\"],\n      \"settings\": {\n        \"fontStyle\": \"regular\",\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"Types\",\n      \"scope\": [\"entity.name.type\", \"keyword.primitive-datatypes.swift\", \"keyword.type.cs\", \"meta.protocol-list.objc\", \"meta.return-type.objc\", \"source.go storage.type\", \"source.groovy storage.type\", \"source.java storage.type\", \"source.powershell entity.other.attribute-name\", \"storage.class.std.rust\", \"storage.type.attribute.swift\", \"storage.type.c\", \"storage.type.core.rust\", \"storage.type.cs\", \"storage.type.groovy\", \"storage.type.objc\", \"storage.type.php\", \"storage.type.haskell\", \"storage.type.ocaml\"],\n      \"settings\": {\n        \"fontStyle\": \"italic\",\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"Generics, templates, and mapped type declarations\",\n      \"scope\": [\"entity.name.type.type-parameter\", \"meta.indexer.mappedtype.declaration entity.name.type\", \"meta.type.parameters entity.name.type\"],\n      \"settings\": {\n        \"foreground\": \"#FFB86C\"\n      }\n    }, {\n      \"name\": \"Modifiers\",\n      \"scope\": [\"storage.modifier\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"RegExp string\",\n      \"scope\": [\"string.regexp\", \"constant.other.character-class.set.regexp\", \"constant.character.escape.backslash.regexp\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\"\n      }\n    }, {\n      \"name\": \"Non-capture operators\",\n      \"scope\": [\"punctuation.definition.group.capture.regexp\"],\n      \"settings\": {\n        \"foreground\": \"#f286c4\"\n      }\n    }, {\n      \"name\": \"RegExp start and end characters\",\n      \"scope\": [\"string.regexp punctuation.definition.string.begin\", \"string.regexp punctuation.definition.string.end\"],\n      \"settings\": {\n        \"foreground\": \"#ee6666\"\n      }\n    }, {\n      \"name\": \"Character group\",\n      \"scope\": [\"punctuation.definition.character-class.regexp\"],\n      \"settings\": {\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"Capture groups\",\n      \"scope\": [\"punctuation.definition.group.regexp\"],\n      \"settings\": {\n        \"foreground\": \"#FFB86C\"\n      }\n    }, {\n      \"name\": \"Assertion operators\",\n      \"scope\": [\"punctuation.definition.group.assertion.regexp\", \"keyword.operator.negation.regexp\"],\n      \"settings\": {\n        \"foreground\": \"#ee6666\"\n      }\n    }, {\n      \"name\": \"Positive lookaheads\",\n      \"scope\": [\"meta.assertion.look-ahead.regexp\"],\n      \"settings\": {\n        \"foreground\": \"#62e884\"\n      }\n    }, {\n      \"name\": \"Strings\",\n      \"scope\": [\"string\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\"\n      }\n    }, {\n      \"name\": \"String quotes (temporary vscode fix)\",\n      \"scope\": [\"punctuation.definition.string.begin\", \"punctuation.definition.string.end\"],\n      \"settings\": {\n        \"foreground\": \"#dee492\"\n      }\n    }, {\n      \"name\": \"Property quotes (temporary vscode fix)\",\n      \"scope\": [\"punctuation.support.type.property-name.begin\", \"punctuation.support.type.property-name.end\"],\n      \"settings\": {\n        \"foreground\": \"#97e2f2\"\n      }\n    }, {\n      \"name\": \"Docstrings\",\n      \"scope\": [\"string.quoted.docstring.multi\", \"string.quoted.docstring.multi.python punctuation.definition.string.begin\", \"string.quoted.docstring.multi.python punctuation.definition.string.end\", \"string.quoted.docstring.multi.python constant.character.escape\"],\n      \"settings\": {\n        \"foreground\": \"#7b7f8b\"\n      }\n    }, {\n      \"name\": \"Variables and object properties\",\n      \"scope\": [\"variable\", \"constant.other.key.perl\", \"support.variable.property\", \"variable.other.constant.js\", \"variable.other.constant.ts\", \"variable.other.constant.tsx\"],\n      \"settings\": {\n        \"foreground\": \"#f6f6f4\"\n      }\n    }, {\n      \"name\": \"Destructuring / aliasing reference name (LHS)\",\n      \"scope\": [\"meta.import variable.other.readwrite\", \"meta.variable.assignment.destructured.object.coffee variable\"],\n      \"settings\": {\n        \"fontStyle\": \"italic\",\n        \"foreground\": \"#FFB86C\"\n      }\n    }, {\n      \"name\": \"Destructuring / aliasing variable name (RHS)\",\n      \"scope\": [\"meta.import variable.other.readwrite.alias\", \"meta.export variable.other.readwrite.alias\", \"meta.variable.assignment.destructured.object.coffee variable variable\"],\n      \"settings\": {\n        \"fontStyle\": \"normal\",\n        \"foreground\": \"#f6f6f4\"\n      }\n    }, {\n      \"name\": \"GraphQL keys\",\n      \"scope\": [\"meta.selectionset.graphql variable\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\"\n      }\n    }, {\n      \"name\": \"GraphQL function arguments\",\n      \"scope\": [\"meta.selectionset.graphql meta.arguments variable\"],\n      \"settings\": {\n        \"foreground\": \"#f6f6f4\"\n      }\n    }, {\n      \"name\": \"GraphQL fragment name (definition)\",\n      \"scope\": [\"entity.name.fragment.graphql\", \"variable.fragment.graphql\"],\n      \"settings\": {\n        \"foreground\": \"#97e1f1\"\n      }\n    }, {\n      \"name\": \"Edge cases (foreground color resets)\",\n      \"scope\": [\"constant.other.symbol.hashkey.ruby\", \"keyword.operator.dereference.java\", \"keyword.operator.navigation.groovy\", \"meta.scope.for-loop.shell punctuation.definition.string.begin\", \"meta.scope.for-loop.shell punctuation.definition.string.end\", \"meta.scope.for-loop.shell string\", \"storage.modifier.import\", \"punctuation.section.embedded.begin.tsx\", \"punctuation.section.embedded.end.tsx\", \"punctuation.section.embedded.begin.jsx\", \"punctuation.section.embedded.end.jsx\", \"punctuation.separator.list.comma.css\", \"constant.language.empty-list.haskell\"],\n      \"settings\": {\n        \"foreground\": \"#f6f6f4\"\n      }\n    }, {\n      \"name\": \"Shell variables prefixed with \\\"$\\\" (edge case)\",\n      \"scope\": [\"source.shell variable.other\"],\n      \"settings\": {\n        \"foreground\": \"#bf9eee\"\n      }\n    }, {\n      \"name\": \"Powershell constants mistakenly scoped to `support`, rather than `constant` (edge)\",\n      \"scope\": [\"support.constant\"],\n      \"settings\": {\n        \"fontStyle\": \"normal\",\n        \"foreground\": \"#bf9eee\"\n      }\n    }, {\n      \"name\": \"Makefile prerequisite names\",\n      \"scope\": [\"meta.scope.prerequisites.makefile\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\"\n      }\n    }, {\n      \"name\": \"SCSS attibute selector strings\",\n      \"scope\": [\"meta.attribute-selector.scss\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\"\n      }\n    }, {\n      \"name\": \"SCSS attribute selector brackets\",\n      \"scope\": [\"punctuation.definition.attribute-selector.end.bracket.square.scss\", \"punctuation.definition.attribute-selector.begin.bracket.square.scss\"],\n      \"settings\": {\n        \"foreground\": \"#f6f6f4\"\n      }\n    }, {\n      \"name\": \"Haskell Pragmas\",\n      \"scope\": [\"meta.preprocessor.haskell\"],\n      \"settings\": {\n        \"foreground\": \"#7b7f8b\"\n      }\n    }, {\n      \"name\": \"Log file error\",\n      \"scope\": [\"log.error\"],\n      \"settings\": {\n        \"foreground\": \"#ee6666\",\n        \"fontStyle\": \"bold\"\n      }\n    }, {\n      \"name\": \"Log file warning\",\n      \"scope\": [\"log.warning\"],\n      \"settings\": {\n        \"foreground\": \"#e7ee98\",\n        \"fontStyle\": \"bold\"\n      }\n    }]\n  },\n  \"skipLanguages\": [],\n  \"filepath\": undefined\n};\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    p: \"p\",\n    strong: \"strong\",\n    a: \"a\",\n    h2: \"h2\",\n    h3: \"h3\",\n    code: \"code\",\n    br: \"br\",\n    ul: \"ul\",\n    li: \"li\"\n  }, _provideComponents(), props.components), {Image, CH} = _components;\n  if (!CH) _missingMdxReference(\"CH\", false);\n  if (!CH.Code) _missingMdxReference(\"CH.Code\", true);\n  if (!Image) _missingMdxReference(\"Image\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      children: \"Defining Our Requirements\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Before we can talk about implementation details, we need to specify what the\\nrequirements for our database will be. I will be basing our requirement list\\ndirectly off of Firestore's feature list. The sections below\\ngive a lightning round description of the features we will be implementing, and\\nspecify some \", _jsx(_components.strong, {\n        children: \"key terms\"\n      }), \" that I will be using over the course of this\\nseries. If you are already well acquainted with Firestore's features feel free\\nto skim or skip to the summary at the bottom. Alternatively, if you have no idea\\nhow Firestore works at all, it could be helpful to read the \", _jsx(_components.a, {\n        href: \"https://firebase.google.com/docs/firestore\",\n        children: \"Firestore's docs\"\n      }), \"\\nwhich explain Firestore's features in more detail.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Data Organization\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Documents and Collections\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Our data model is going to be nearly identical to Firestore's. We will be\\nstoring \", _jsx(_components.strong, {\n        children: \"documents\"\n      }), \" of key-value pairs inside \", _jsx(_components.strong, {\n        children: \"collections\"\n      }), \". Every\\ndocument will have a string identifier, \", _jsx(_components.strong, {\n        children: \"document_id\"\n      }), \" and will be the child of a\\ncollection with its own string identifier, \", _jsx(_components.strong, {\n        children: \"collection_id\"\n      }), \". Consider the\\nchat room example from the\\n\", _jsx(_components.a, {\n        href: \"https://firebase.google.com/docs/firestore/data-model#hierarchical-data\",\n        children: \"Firestore documentation\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(\"div\", {\n      className: \"collection\",\n      children: [_jsxs(\"div\", {\n        className: \"document-title\",\n        children: [\" \", _jsx(Image, {\n          src: \"/images/collection-dark.png\",\n          alt: \"drawing\",\n          height: \"30\",\n          width: \"30\"\n        }), \" \", _jsx(\"div\", {\n          className: \"document-name\",\n          children: \" rooms \"\n        }), \" \"]\n      }), _jsxs(\"div\", {\n        className: \"collections-tabbed\",\n        children: [_jsxs(\"div\", {\n          className: \"document-title\",\n          children: [_jsx(Image, {\n            src: \"/images/document-dark.png\",\n            alt: \"drawing\",\n            height: \"30\",\n            width: \"30\"\n          }), \" \", _jsx(\"div\", {\n            className: \"document-name\",\n            children: \" roomA \"\n          }), \" \"]\n        }), _jsx(\"div\", {\n          className: \"collections-tabbed\",\n          children: _jsx(_components.code, {\n            children: \"name : 'Chat Room A'\"\n          })\n        })]\n      }), _jsxs(\"div\", {\n        className: \"collections-tabbed\",\n        children: [_jsxs(\"div\", {\n          className: \"document-title\",\n          children: [_jsx(Image, {\n            src: \"/images/document-dark.png\",\n            alt: \"drawing\",\n            height: \"30\",\n            width: \"30\"\n          }), \" \", _jsx(\"div\", {\n            className: \"document-name\",\n            children: \" roomB \"\n          }), \" \"]\n        }), _jsx(\"div\", {\n          className: \"collections-tabbed\",\n          children: _jsx(_components.code, {\n            children: \"name : 'Chat Room B'\"\n          })\n        })]\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"We have a collection with a collection_id \", _jsx(_components.code, {\n        children: \"rooms\"\n      }), \". It holds multiple documents\\nwhich each represent a chat room. The two documents shown have document_id \", _jsx(_components.code, {\n        children: \"roomA\"\n      }), \"\\nand \", _jsx(_components.code, {\n        children: \"roomB\"\n      }), \". Each of our chat room documents have a \", _jsx(_components.strong, {\n        children: \"field\"\n      }), \" with the\\n\", _jsx(_components.strong, {\n        children: \"key\"\n      }), \" \", _jsx(_components.code, {\n        children: \"name\"\n      }), \" and a string \", _jsx(_components.strong, {\n        children: \"value\"\n      }), \" holding the chat room's descriptive\\nname.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Subcollections\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Our documents can also have subcollections. In this case, we will give each chat\\nroom a subcollection, \", _jsx(_components.code, {\n        children: \"messages\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(\"div\", {\n      className: \"collection\",\n      children: [_jsxs(\"div\", {\n        className: \"document-title\",\n        children: [\" \", _jsx(Image, {\n          src: \"/images/collection-dark.png\",\n          alt: \"drawing\",\n          height: \"30\",\n          width: \"30\"\n        }), \" \", _jsx(\"div\", {\n          className: \"document-name\",\n          children: \" rooms \"\n        }), \" \"]\n      }), _jsxs(\"div\", {\n        className: \"collections-tabbed\",\n        children: [_jsxs(\"div\", {\n          className: \"document-title\",\n          children: [_jsx(Image, {\n            src: \"/images/document-dark.png\",\n            alt: \"drawing\",\n            height: \"30\",\n            width: \"30\"\n          }), \" \", _jsx(\"div\", {\n            className: \"document-name\",\n            children: \" roomA \"\n          }), \" \"]\n        }), _jsx(\"div\", {\n          className: \"collections-tabbed\",\n          children: _jsx(_components.code, {\n            children: \"name : 'Chat Room A'\"\n          })\n        }), _jsx(\"div\", {\n          className: \"collections-tabbed\",\n          children: _jsx(\"div\", {\n            className: \"collections-tabbed\",\n            children: _jsxs(\"div\", {\n              className: \"collection\",\n              children: [_jsxs(\"div\", {\n                className: \"document-title\",\n                children: [\" \", _jsx(Image, {\n                  src: \"/images/collection-dark.png\",\n                  alt: \"drawing\",\n                  height: \"30\",\n                  width: \"30\"\n                }), \" \", _jsx(\"div\", {\n                  className: \"document-name\",\n                  children: \" messages \"\n                }), \" \"]\n              }), _jsxs(\"div\", {\n                className: \"collections-tabbed\",\n                children: [_jsxs(\"div\", {\n                  className: \"document-title\",\n                  children: [_jsx(Image, {\n                    src: \"/images/document-dark.png\",\n                    alt: \"drawing\",\n                    height: \"30\",\n                    width: \"30\"\n                  }), \" \", _jsx(\"div\", {\n                    className: \"document-name\",\n                    children: \" message1 \"\n                  }), \" \"]\n                }), _jsx(\"div\", {\n                  className: \"collections-tabbed\",\n                  children: _jsx(_components.code, {\n                    children: \"from : 'alex'\"\n                  })\n                }), _jsx(\"div\", {\n                  className: \"collections-tabbed\",\n                  children: _jsx(_components.code, {\n                    children: \"message : 'Hello World!'\"\n                  })\n                }), _jsx(\"div\", {\n                  className: \"collections-tabbed\",\n                  children: _jsx(_components.code, {\n                    children: \"messageCount: 0\"\n                  })\n                })]\n              }), _jsxs(\"div\", {\n                className: \"collections-tabbed\",\n                children: [_jsxs(\"div\", {\n                  className: \"document-title\",\n                  children: [_jsx(Image, {\n                    src: \"/images/document-dark.png\",\n                    alt: \"drawing\",\n                    height: \"30\",\n                    width: \"30\"\n                  }), \" \", _jsx(\"div\", {\n                    className: \"document-name\",\n                    children: \" message2 \"\n                  }), \" \"]\n                }), _jsx(\"div\", {\n                  className: \"collections-tabbed\",\n                  children: _jsx(_components.code, {\n                    children: \"from : 'mary'\"\n                  })\n                }), _jsx(\"div\", {\n                  className: \"collections-tabbed\",\n                  children: _jsx(_components.code, {\n                    children: \"message : 'Hello Worlds!'\"\n                  })\n                }), _jsx(\"div\", {\n                  className: \"collections-tabbed\",\n                  children: _jsx(_components.code, {\n                    children: \"messageCount: 1\"\n                  })\n                })]\n              })]\n            })\n          })\n        })]\n      }), _jsxs(\"div\", {\n        className: \"collections-tabbed\",\n        children: [_jsxs(\"div\", {\n          className: \"document-title\",\n          children: [_jsx(Image, {\n            src: \"/images/document-dark.png\",\n            alt: \"drawing\",\n            height: \"30\",\n            width: \"30\"\n          }), \" \", _jsx(\"div\", {\n            className: \"document-name\",\n            children: \" roomB \"\n          }), \" \"]\n        }), _jsx(\"div\", {\n          className: \"collections-tabbed\",\n          children: _jsx(_components.code, {\n            children: \"name : 'Chat Room B'\"\n          })\n        }), _jsx(\"div\", {\n          className: \"collections-tabbed\",\n          children: _jsx(\"div\", {\n            className: \"collections-tabbed\",\n            children: _jsxs(\"div\", {\n              className: \"collection\",\n              children: [_jsxs(\"div\", {\n                className: \"document-title\",\n                children: [\" \", _jsx(Image, {\n                  src: \"/images/collection-dark.png\",\n                  alt: \"drawing\",\n                  height: \"30\",\n                  width: \"30\"\n                }), \" \", _jsx(\"div\", {\n                  className: \"document-name\",\n                  children: \" messages \"\n                }), \" \"]\n              }), _jsxs(\"div\", {\n                className: \"collections-tabbed\",\n                children: [_jsxs(\"div\", {\n                  className: \"document-title\",\n                  children: [_jsx(Image, {\n                    src: \"/images/document-dark.png\",\n                    alt: \"drawing\",\n                    height: \"30\",\n                    width: \"30\"\n                  }), \" \", _jsx(\"div\", {\n                    className: \"document-name\",\n                    children: \" message1 \"\n                  }), \" \"]\n                }), _jsx(\"div\", {\n                  className: \"collections-tabbed\",\n                  children: _jsx(_components.code, {\n                    children: \"from : 'jeff'\"\n                  })\n                }), _jsx(\"div\", {\n                  className: \"collections-tabbed\",\n                  children: _jsx(_components.code, {\n                    children: \"message : 'Lorem'\"\n                  })\n                }), _jsx(\"div\", {\n                  className: \"collections-tabbed\",\n                  children: _jsx(_components.code, {\n                    children: \"messageCount: 0\"\n                  })\n                })]\n              }), _jsxs(\"div\", {\n                className: \"collections-tabbed\",\n                children: [_jsxs(\"div\", {\n                  className: \"document-title\",\n                  children: [_jsx(Image, {\n                    src: \"/images/document-dark.png\",\n                    alt: \"drawing\",\n                    height: \"30\",\n                    width: \"30\"\n                  }), \" \", _jsx(\"div\", {\n                    className: \"document-name\",\n                    children: \" message2 \"\n                  }), \" \"]\n                }), _jsx(\"div\", {\n                  className: \"collections-tabbed\",\n                  children: _jsx(_components.code, {\n                    children: \"from : 'alex'\"\n                  })\n                }), _jsx(\"div\", {\n                  className: \"collections-tabbed\",\n                  children: _jsx(_components.code, {\n                    children: \"message : 'Ipsum'\"\n                  })\n                }), _jsx(\"div\", {\n                  className: \"collections-tabbed\",\n                  children: _jsx(_components.code, {\n                    children: \"messageCount: 1\"\n                  })\n                })]\n              })]\n            })\n          })\n        })]\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.code, {\n        children: \"messages\"\n      }), \" subcollection holds all of the messages in the chat room. In this\\ncase, each message document has three fields, \", _jsx(_components.code, {\n        children: \"from\"\n      }), \", \", _jsx(_components.code, {\n        children: \"message\"\n      }), \", and\\n\", _jsx(_components.code, {\n        children: \"messageCount\"\n      }), \" which store the name of the message's sender, the content of the\\nmessage, and the number of messages that have been sent.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Document Identifiers and Uniqueness\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Documents and collections are uniquely identified in the database by the path\\nfrom their root collection. This includes all parent collections and document\\nids.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For example, the full unique identifier for the \", _jsx(_components.code, {\n        children: \"messages\"\n      }), \" collection in \", _jsx(_components.code, {\n        children: \"roomA\"\n      }), \" is\\n\", _jsx(_components.code, {\n        children: \"\\\"/rooms/roomA/messages\\\"\"\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"and the full unique identifier for \", _jsx(_components.code, {\n        children: \"message1\"\n      }), \" in \", _jsx(_components.code, {\n        children: \"roomA\"\n      }), \" is\\n\", _jsx(_components.code, {\n        children: \"\\\"/rooms/roomA/messages/message1\\\"\"\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"We will break these unique identifiers into three components. The first two,\\n\", _jsx(_components.strong, {\n        children: \"document_id\"\n      }), \" and \", _jsx(_components.strong, {\n        children: \"collection_id\"\n      }), \", we have already seen. The third is\\n\", _jsx(_components.strong, {\n        children: \"collection_parent_path\"\n      }), \" and encompasses everything in a documents unique\\npath prior to it's collection. For example, the collection_parent_path for the\\nmessages collection above is \", _jsx(_components.code, {\n        children: \"\\\"/rooms/roomA\\\"\"\n      }), \". The collection_parent_path for top\\nlevel collections (eg. rooms) is just an empty string.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In general the unique identifier for any collection takes the form\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.code, {\n        children: \"\\\"/\u003ccollection_parent_path\u003e/\u003ccollection_id\u003e/\\\"\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"and the unique identifier for any document takes the form\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.code, {\n        children: \"\\\"/\u003ccollection_parent_path\u003e/\u003ccollection_id\u003e/\u003cdocument_id\u003e\\\"\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Data Types\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Firestore allows documents to have values of the following datatypes\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Null\", _jsx(_components.br, {}), \"\\n\", \"Boolean\", _jsx(_components.br, {}), \"\\n\", \"64 bit Integer\", _jsx(_components.br, {}), \"\\n\", \"64 bit Float\", _jsx(_components.br, {}), \"\\n\", \"DateTime\", _jsx(_components.br, {}), \"\\n\", \"String\", _jsx(_components.br, {}), \"\\n\", \"Bytes\", _jsx(_components.br, {}), \"\\n\", \"Document Reference\", _jsx(_components.br, {}), \"\\n\", \"Geographic Point\", _jsx(_components.br, {}), \"\\n\", \"Array\", _jsx(_components.br, {}), \"\\n\", \"Map\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"We will support all of these types except Array, Map, and Geographic Point.\\nSupporting Array and Map types is very doable, but including these types\\ninitially will muddle the explanation of some the more fundamental concepts our\\ndatabase will utilize. The geographic point type is currently not\\nrecommended for use, so I am just going to ignore it entirely.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Because documents can have values with different types for the same field key,\\nwe need a consistent way to compare field values with different types. For this\\npurpose the different types will be ordered based on their position in the list\\nabove (ie. a null type is always less than a boolean type which is always less\\nthan an integer and so on). The only exception to this is that integers and floats\\nwill be ordered based on their numberic value (eg. \", _jsx(_components.code, {\n        children: \"1 \u003c 2.5 \u003c 3 \u003c 3.5\"\n      }), \").\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Queries\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Following \", _jsx(_components.a, {\n        href: \"https://firebase.google.com/docs/firestore/query-data/queries\",\n        children: \"Firestore's terminolgy\"\n      }), \",\\nwe will classify queries as either \", _jsx(_components.strong, {\n        children: \"simple\"\n      }), \" or \", _jsx(_components.strong, {\n        children: \"compound\"\n      }), \" and will allow queries on\\n\", _jsx(_components.strong, {\n        children: \"collections\"\n      }), \" as well as \", _jsx(_components.strong, {\n        children: \"collection groups\"\n      }), \". A collection group is any group of collections\\nthat have the same collection_id.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Simple Queries\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Simple queries have only one constraint. Using our message room example from\\nabove, if we wanted to get all of the messages in roomA that were sent by \\\"alex\\\"\\nwe could write the query,\"\n    }), \"\\n\", _jsx(CH.Code, {\n      codeConfig: chCodeConfig,\n      northPanel: {\n        \"tabs\": [\"\"],\n        \"active\": \"\",\n        \"heightRatio\": 1\n      },\n      files: [{\n        \"name\": \"\",\n        \"focus\": \"\",\n        \"code\": {\n          \"lines\": [{\n            \"tokens\": [{\n              \"content\": \"query\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"rooms/roomA/messages\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"where\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"from\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"alex\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"));\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }],\n          \"lang\": \"typescript\"\n        },\n        \"annotations\": []\n      }]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"We will support simple queries on all document fields for the operators \", _jsx(_components.code, {\n        children: \"\u003c\"\n      }), \",\\n\", _jsx(_components.code, {\n        children: \"\u003c=\"\n      }), \", \", _jsx(_components.code, {\n        children: \"\u003e\"\n      }), \", \", _jsx(_components.code, {\n        children: \"\u003e=\"\n      }), \", \", _jsx(_components.code, {\n        children: \"==\"\n      }), \", and \", _jsx(_components.code, {\n        children: \"!=\"\n      }), \" without advanced notice that the query will be\\nmade (ie. without the need to make a new index for the query).\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Collection Groups\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"We will also support queries on \", _jsx(_components.strong, {\n        children: \"collection groups\"\n      }), \". A collection group is a\\nset of collections that all have the same collection_id. If we wanted to get all\\nof the messages sent by \\\"alex\\\" to any chat room, we could write\"]\n    }), \"\\n\", _jsx(CH.Code, {\n      codeConfig: chCodeConfig,\n      northPanel: {\n        \"tabs\": [\"\"],\n        \"active\": \"\",\n        \"heightRatio\": 1\n      },\n      files: [{\n        \"name\": \"\",\n        \"focus\": \"\",\n        \"code\": {\n          \"lines\": [{\n            \"tokens\": [{\n              \"content\": \"query\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"collectionGroup\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"'\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"messages\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"'\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"), \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"where\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"'\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"from\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"'\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"'\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"'\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"'\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"alex\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"'\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"))\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }],\n          \"lang\": \"typescript\"\n        },\n        \"annotations\": []\n      }]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This will retrieve all of the messages with sender \\\"alex\\\" from all messages\\nsubcollections.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Compound Queries\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Compound queries allow you to specify multiple constraints. If we wanted to get\\nmessages sent by \\\"alex\\\" that were in the first 500 messages sent to roomA we\\ncould write the query\"\n    }), \"\\n\", _jsx(CH.Code, {\n      codeConfig: chCodeConfig,\n      northPanel: {\n        \"tabs\": [\"\"],\n        \"active\": \"\",\n        \"heightRatio\": 1\n      },\n      files: [{\n        \"name\": \"\",\n        \"focus\": \"\",\n        \"code\": {\n          \"lines\": [{\n            \"tokens\": [{\n              \"content\": \"query\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"rooms/roomA/messages\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"where\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"from\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"alex\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"),\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"where\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"messageCount\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"\u003c\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"500\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#BF9EEE\"\n                }\n              }\n            }, {\n              \"content\": \")\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \");\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }],\n          \"lang\": \"typescript\"\n        },\n        \"annotations\": []\n      }]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Compound queries have some restrictions though. First, we will require that\\nfields used in a compound query be specified in advance in a \", _jsx(_components.strong, {\n        children: \"composite field\\ngroup\"\n      }), \" (see the next section for details). Second, only one field in the query\\ncan have a non-equality operator (\", _jsx(_components.code, {\n        children: \"\u003c\"\n      }), \", \", _jsx(_components.code, {\n        children: \"\u003c=\"\n      }), \", \", _jsx(_components.code, {\n        children: \"\u003e\"\n      }), \", \", _jsx(_components.code, {\n        children: \"\u003e=\"\n      }), \", \", _jsx(_components.code, {\n        children: \"!=\"\n      }), \") placed on it. All\\nother fields can only be constrained by the equality operator. For example, the\\nquery\"]\n    }), \"\\n\", _jsx(CH.Code, {\n      codeConfig: chCodeConfig,\n      northPanel: {\n        \"tabs\": [\"\"],\n        \"active\": \"\",\n        \"heightRatio\": 1\n      },\n      files: [{\n        \"name\": \"\",\n        \"focus\": \"\",\n        \"code\": {\n          \"lines\": [{\n            \"tokens\": [{\n              \"content\": \"query\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"rooms/roomA/messages\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"where\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"from\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"!=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"alex\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"),\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"where\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"messageCount\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"\u003c\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"500\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#BF9EEE\"\n                }\n              }\n            }, {\n              \"content\": \")\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \");\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }],\n          \"lang\": \"typescript\"\n        },\n        \"annotations\": []\n      }]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"would not be allowed. But why would you want to exclude Alex anyway?\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Composite Field Groups\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Before we can make a compound query on a set of fields, we will require the user\\nto specifiy a \", _jsx(_components.strong, {\n        children: \"composite field group\"\n      }), \", this will allow us to make the tables\\nand indexes required to support the query. For the above query, we would specify the\\ncomposite fields\"]\n    }), \"\\n\", _jsx(CH.Code, {\n      codeConfig: chCodeConfig,\n      northPanel: {\n        \"tabs\": [\"\"],\n        \"active\": \"\",\n        \"heightRatio\": 1\n      },\n      files: [{\n        \"name\": \"\",\n        \"focus\": \"\",\n        \"code\": {\n          \"lines\": [{\n            \"tokens\": [{\n              \"content\": \"{\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  collectionPath: \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"/rooms/roomA/messages\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  groupType: \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"COLLECTION\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  fields: [\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"from\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"messageCount\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"]\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"}\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }],\n          \"lang\": \"typescript\"\n        },\n        \"annotations\": []\n      }]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Here we indicate that we are specifying we want to run queries on the\\ncollection \", _jsx(_components.code, {\n        children: \"/rooms/roomA/messages\"\n      }), \", and that we want include\\nthe fields \\\"from\\\" and \\\"messageCount\\\" in a single query.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"This only lets us run queries on one \", _jsx(_components.code, {\n        children: \"messages\"\n      }), \" collection though (the one that\\nis a child to \", _jsx(_components.code, {\n        children: \"roomA\"\n      }), \"). Most likely, we would want to run queries on all \", _jsx(_components.code, {\n        children: \"messages\"\n      }), \"\\ncollections. To do that we would specify the composite group below.\"]\n    }), \"\\n\", _jsx(CH.Code, {\n      codeConfig: chCodeConfig,\n      northPanel: {\n        \"tabs\": [\"\"],\n        \"active\": \"\",\n        \"heightRatio\": 1\n      },\n      files: [{\n        \"name\": \"\",\n        \"focus\": \"\",\n        \"code\": {\n          \"lines\": [{\n            \"tokens\": [{\n              \"content\": \"{\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  collectionPath: \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"messages\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  groupType: \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"COLLECTION_GROUP\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  fields: [\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"from\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"messageCount\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"]\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"}\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }],\n          \"lang\": \"typescript\"\n        },\n        \"annotations\": []\n      }]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Here we indicate that we are specifying the group of composite fields for all\\nindividual collections with collection_id \", _jsx(_components.code, {\n        children: \"messages\"\n      }), \". We can the run queries over\\nthat collection group.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In this series, we are going to assume that we have already parsed a config file that\\nspecifies all of the composite groups that will be queried. For a production\\ndatabase, we would want to be able to update this config dynamically and also be able to specify\\nthe relative order that the fields will be sorted in by default, but those two features will be\\nout of scope for this series.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Subscriptions\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"One of the key features of Firestore is that our client side applications can\\nsubscribe to changes in collections and queries and be notified with updates are\\nmade in real time. We could create the subscription below to print messages sent\\nfrom Alex to roomA.\"\n    }), \"\\n\", _jsx(CH.Code, {\n      codeConfig: chCodeConfig,\n      northPanel: {\n        \"tabs\": [\"\"],\n        \"active\": \"\",\n        \"heightRatio\": 1\n      },\n      files: [{\n        \"name\": \"\",\n        \"focus\": \"\",\n        \"code\": {\n          \"lines\": [{\n            \"tokens\": [{\n              \"content\": \"let\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" q \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"query\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"rooms/roomA/messages\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \",\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"where\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"from\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"==\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"alex\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"),\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"where\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"messageCount\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"\u003c\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"500\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#BF9EEE\"\n                }\n              }\n            }, {\n              \"content\": \")\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \");\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"let\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" unsubscribeHandler \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"onSnapshot\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(q, (\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"querySnapshot\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#FFB86C\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \") \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\u003e\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" {\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"const\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" messages \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" [];\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  querySnapshot.\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"forEach\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"((\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"doc\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#FFB86C\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \") \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\u003e\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" {\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"    messages.\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"push\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(doc.\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"data\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"().message);\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  });\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  console.\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"log\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(messages);\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"});\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }],\n          \"lang\": \"typescript\"\n        },\n        \"annotations\": []\n      }]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Every time Alex sends a message to the chat room, the results of the query will\\nchange and our subscription will receive the updated list of messages. Once new\\nmessages from Alex have a \", _jsx(_components.code, {\n        children: \"messageCount\"\n      }), \" greater than 500, the subscription will\\nstop firing because a new message will not change the query results.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"We will also support subscriptions to changes in individual documents,\\ncollections, and collection groups.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Optimistic Transactions\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Like Firestore, we will support client side transactions with\\n\", _jsx(_components.a, {\n        href: \"https://firebase.google.com/docs/firestore/transaction-data-contention#data_contention_in_the_mobileweb_sdks\",\n        children: \"optimistic concurrency\"\n      }), \".\\nFor example, if we wanted our client side app to be able to update the \", _jsx(_components.code, {\n        children: \"count\"\n      }), \"\\nfield in the document \", _jsx(_components.code, {\n        children: \"counter\"\n      }), \" in collection \", _jsx(_components.code, {\n        children: \"counter_collection\"\n      }), \", we could\\nwrite the transaction\"]\n    }), \"\\n\", _jsx(CH.Code, {\n      codeConfig: chCodeConfig,\n      northPanel: {\n        \"tabs\": [\"\"],\n        \"active\": \"\",\n        \"heightRatio\": 1\n      },\n      files: [{\n        \"name\": \"\",\n        \"focus\": \"\",\n        \"code\": {\n          \"lines\": [{\n            \"tokens\": [{\n              \"content\": \"await\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"runTransaction\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(db, \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"async\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" (\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"transaction\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#FFB86C\",\n                  \"fontStyle\": \"italic\"\n                }\n              }\n            }, {\n              \"content\": \") \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\u003e\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" {\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"let\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" counterDoc \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"await\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" transaction.\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"get\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"/counter_collection/counter\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \");\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"let\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" currentCount \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"=\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" counterDoc.\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"data\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"().count;\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"  transaction.\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"update\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#62E884\"\n                }\n              }\n            }, {\n              \"content\": \"(\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \"/counter_collection/counter\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#E7EE98\"\n                }\n              }\n            }, {\n              \"content\": \"\\\"\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#DEE492\"\n                }\n              }\n            }, {\n              \"content\": \", { count\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \":\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" currentCount \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"+\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F286C4\"\n                }\n              }\n            }, {\n              \"content\": \" \",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }, {\n              \"content\": \"1\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#BF9EEE\"\n                }\n              }\n            }, {\n              \"content\": \" });\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }, {\n            \"tokens\": [{\n              \"content\": \"});\",\n              \"props\": {\n                \"style\": {\n                  \"color\": \"#F6F6F4\"\n                }\n              }\n            }]\n          }],\n          \"lang\": \"typescript\"\n        },\n        \"annotations\": []\n      }]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This code will read the counter document, update it with the new value and rollback\\nif there was contention. Like Firestore, we will require that all reads made in a\\ntransaction be made before any writes.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Pessimistic Transactions\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Optimistic transactions fail automatically if there is contention around a\\ndocument write. This makes them ill suited for cases where multiple clients are\\nlikely to be writing to the same document at the same time. Firestore advertises\\nthat it has server side transactions that run with\\n\", _jsx(_components.a, {\n        href: \"https://firebase.google.com/docs/firestore/transaction-data-contention#data_contention_in_the_server_client_libraries\",\n        children: \"pessimistic concurrency\"\n      }), \",\\nbut there is\\n\", _jsx(_components.a, {\n        href: \"https://github.com/googleapis/nodejs-firestore/issues/785\",\n        children: \"some contention\"\n      }), \"\\n(sorry) over how effective their pessimistic concurrency controls are.\\nFirestore's pessimistic concurrency ensures that when there is contention on a\\ndocument at least one transaction attempting to modify the document can\\ncomplete, but all other transactions attempting to modify the document will have\\nto retry and will ultimately fail if the 5 retry limit is reached. This is\\ninstead of queuing the contested transactions and completing them in the order\\nthey were made. Personally, when I have used Firestore's server side transactions in the\\npast, they did not live up to my expectations for how a pessimistic transaction\\nshould behave. We are going to leave pessimistic transactions out of this series' implementation.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Client Libraries\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Firestore's client libraries play an important role in making the database useable,\\nmanageing subscriptions and transactions for example. However, in this series, I will\\nonly be demonstrating the server side code needed to support the database.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"We are also going to hopscotch right over security rules. For this series, we will assume\\nthat any requests have already passed through an auth layer.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Summary\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [\"Our database will store \", _jsx(_components.strong, {\n            children: \"documents\"\n          }), \" and in heirarchical \", _jsx(_components.strong, {\n            children: \"collections\"\n          }), \".\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [\"Collections are uniquely identified by their \", _jsx(_components.strong, {\n            children: \"collection_id\"\n          }), \" and\\n\", _jsx(_components.strong, {\n            children: \"collection_parent_path\"\n          })]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [\"A document is uniquely identified by their \", _jsx(_components.strong, {\n            children: \"document_id\"\n          }), \" and the unique\\nidentifier of its parent collection\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [\"Documents consist of \", _jsx(_components.strong, {\n            children: \"fields\"\n          }), \" with string \", _jsx(_components.strong, {\n            children: \"keys\"\n          }), \" and \", _jsx(_components.strong, {\n            children: \"values\"\n          }), \" with one\\nof the following types: null, boolean, 64 bit integer, 64 bit float, DateTime,\\nString, Bytes, Document Reference.\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [\"We will support \", _jsx(_components.strong, {\n            children: \"simple queries\"\n          }), \" on any field with the operators (\", _jsx(_components.code, {\n            children: \"\u003c\"\n          }), \",\\n\", _jsx(_components.code, {\n            children: \"\u003c=\"\n          }), \", \", _jsx(_components.code, {\n            children: \"\u003e\"\n          }), \", \", _jsx(_components.code, {\n            children: \"\u003e=\"\n          }), \", \", _jsx(_components.code, {\n            children: \"==\"\n          }), \", \", _jsx(_components.code, {\n            children: \"!=\"\n          }), \") without the need for fields that are queried to\\nbe specified in advance\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [\"We will support \", _jsx(_components.strong, {\n            children: \"compound queries\"\n          }), \", but the fields that will be queried\\nneed to be specified in advance. Additionally, non-equality operators are only\\nallowed on one field in a compound query.\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [\"Queries can be performed on an individual collections or a \", _jsx(_components.strong, {\n            children: \"collection\\ngroups\"\n          }), \" (group of collections which all have the same collection_id)\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: \"Client side applications can subscribe to real time updates of documents,\\ncollections, and queries.\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: \"We will support client side transactions with optimistic concurrency\"\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Now that we know what we are building, we can put together the foundation of our\\ndatabase!\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  chCodeConfig,\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}},"title":"Defining Our Requirements","index":2,"previousPost":{"title":"Getting Started","index":1,"slug":"intro"},"nextPost":{"title":"The Database","index":3,"slug":"the-basic-database"}},"__N_SSG":true},"page":"/posts/[[...slug]]","query":{"slug":["defining-requirements"]},"buildId":"TzcNXjE2H_8iZRqU7ysyl","assetPrefix":"/diy-firestore","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>